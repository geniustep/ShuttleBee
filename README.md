# ๐ ShuttleBee - ูุธุงู ุฅุฏุงุฑุฉ ุงูููู ุงููุฏุฑุณู ุงูุดุงูู

<div align="center">

![Version](https://img.shields.io/badge/version-18.0.2.3.2-blue)
![Odoo](https://img.shields.io/badge/Odoo-18.0-green)
![License](https://img.shields.io/badge/license-LGPL--3-orange)

**ูุธุงู ุดุงูู ูุฅุฏุงุฑุฉ ุฎุฏูุงุช ุงูููู ุงููุฏุฑุณู ูุงูุดุฑูุงุช ูู Odoo 18**

[ุงูููุฒุงุช](#-ุงูููุฒุงุช-ุงูุฑุฆูุณูุฉ) โข [ุงูุชุซุจูุช](#-ุงูุชุซุจูุช) โข [ุงูุฅุนุฏุงุฏ](#-ุงูุฅุนุฏุงุฏ-ุงูุฃููู) โข [ุงูุงุณุชุฎุฏุงู](#-ุงูุงุณุชุฎุฏุงู-ุงูุนููู) โข [ุงูุฏุนู](#-ุงูุฏุนู)

</div>

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

**ShuttleBee** ูู ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุฎุฏูุงุช ุงูููู ุงููุฏุฑุณู ูุงูุดุฑูุงุช ูู Odoo 18. ูููุฑ ุญูููุงู ุดุงููุฉ ูุฅุฏุงุฑุฉ ุงูุฑุญูุงุชุ ุชุชุจุน ุงูุฑูุงุจุ ุชูุณูู ุงูุณุงุฆูููุ ูุฃุชูุชุฉ ุงูุฅุดุนุงุฑุงุช ูุน ุฏุนู ูุงูู ููุฅุญุฏุงุซูุงุช ุงูุฌุบุฑุงููุฉ (GPS) ูููุงุท ุงูุชุฌูุน ุงูุซุงุจุชุฉ.

### ๐ฏ ุงูุญุงูุงุช ุงูุงุณุชุฎุฏุงููุฉ

- **ุงููุฏุงุฑุณ ุงูุฎุงุตุฉ**: ุฅุฏุงุฑุฉ ููู ุงูุทูุงุจ ูู ูุฅูู ุงููุฏุฑุณุฉ
- **ุงูุดุฑูุงุช**: ุฎุฏูุงุช ุงูููู ููููุธููู
- **ุงูููุงุฏู**: ุฎุฏูุงุช ุงูููู ูู ูุฅูู ุงููุทุงุฑ
- **ุงูููุธูุงุช**: ุฃู ุฎุฏูุฉ ููู ููุธูุฉ ูููุฌููุนุงุช

---

## โจ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ๐ ุฅุฏุงุฑุฉ ุงูุฑุญูุงุช (Trip Management)

#### **Passenger Groups (ูุฌููุนุงุช ุงูุฑูุงุจ)**
- โ **ุงููุงูุจ ุงูุซุงุจุช**: ุฅูุดุงุก ููุงูุจ ูููุณุงุฑุงุช ูุน ุงูุฑูุงุจ ุงูุซุงุจุชูู
- โ **ุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู**: ุงุณุชุฎุฏุงู ููุณ ุงููุฌููุนุฉ ูุฅูุดุงุก ุฑุญูุงุช ููููุฉ ูุชุนุฏุฏุฉ
- โ **ุงููุฑููุฉ**: ุฏุนู Stops ุซุงุจุชุฉ ุฃู ุฅุญุฏุงุซูุงุช GPS ููุฑูุงุจ
- โ **ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ**: ุณุงุฆู ุงูุชุฑุงุถูุ ูุฑูุจุฉ ุงูุชุฑุงุถูุฉุ ุนุฏุฏ ุงูููุงุนุฏ
- โ **Destination Stop**: ููุทุฉ ุงููุฌูุฉ ุงููุดุชุฑูุฉ (ูุซู ุงููุฏุฑุณุฉ/ุงูุนูู) - ุชูุณุชุฎุฏู ุชููุงุฆูุงู ููุฑูุงุจ ุจุฏูู Stop ูุญุฏุฏ
- โ **ุงูุชุฑุงุญ ุฃูุฑุจ Stop**: ุฒุฑ ุฐูู ูุญุณุงุจ ุงููุณุงูุฉ ูุงูุชุฑุงุญ ุฃูุฑุจ Stop ุจูุงุกู ุนูู ุฅุญุฏุงุซูุงุช GPS ููุฑุงูุจ
- โ **ุฌุฏููุฉ ุฃุณุจูุนูุฉ**: ุฅูุดุงุก ุฌุฏูู ุฃุณุจูุนู ููุฑุญูุงุช ูุน ุฃููุงุช ูุญุฏุฏุฉ ููู ููู
- โ **ุฅุฏุงุฑุฉ ุงูุนุทู**: ุชุญุฏูุฏ ุฃูุงู ุงูุนุทู ูุงูุงุณุชุซูุงุกุงุช ุงูุชู ูุชู ุงุณุชุซูุงุคูุง ูู ุชูููุฏ ุงูุฑุญูุงุช
- โ **ุชูููุฏ ุชููุงุฆู ููุฑุญูุงุช**: ุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุงูุฌุฏูู ุงูุฃุณุจูุนู
- โ **ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ**: ุฅุถุงูุฉ ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ ููุฌูุฉ ุงูุชุฑุงุถูุฉ ููุฑูุงุจ
- โ **ุชูุถููุงุช ุงุชุฌุงู ุงูุฑุญูุฉ**: ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุฑุงูุจ ูุณุชููุฏ ูู Pickup & Dropoffุ Pickup Onlyุ ุฃู Dropoff Only

#### **Shuttle Trips (ุงูุฑุญูุงุช ุงููุนููุฉ)**
- โ **ุฑุจุท ุฅูุฒุงูู**: ูู ุฑุญูุฉ ูุฑุชุจุทุฉ ุจูุฌููุนุฉ ุฑูุงุจ (Passenger Group)
- โ **ุญุงูุงุช ุงูุฑุญูุฉ**: Draft โ Planned โ Ongoing โ Done โ Cancelled
- โ **ุชุชุจุน ููุฑู**: ุชุญุฏูุซ ุงูุญุงูุฉ ูู ุงูููุช ุงููุนูู
- โ **ุฅุญุตุงุฆูุงุช ุดุงููุฉ**: ูุนุฏู ุงูุฅุดุบุงูุ ุงูุญุถูุฑุ ุงูุบูุงุจุ ุนุฏุฏ ุงูุฑูุงุจ
- โ **ุงูุชุญูู ุงูุชููุงุฆู**: ูุญุต ุดุงูู ููุจูุงูุงุช ูุจู ุงูุชุฃููุฏ/ุงูุจุฏุก
- โ **ุชุญุฏูุซ ุชููุงุฆู ููุญุถูุฑ**: ุนูุฏ ุฅููุงู ุงูุฑุญูุฉุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุญุงุถุฑ" ุชููุงุฆูุงู
- โ **ุชุญุฏูุซ ุชููุงุฆู ููุตุนูุฏ**: ุนูุฏ ุชุณุฌูู ุฑุงูุจ ูุงุญุฏ ูู "ุตุนุฏ"ุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุขุฎุฑูู ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุตุนุฏ" ุชููุงุฆูุงู

#### **ูููุฏ ุงูุฑุญูุงุช (Trip Wizard)**
- โ ุฅูุดุงุก ุฑุญูุฉ ุตุจุงุญูุฉ ู/ุฃู ูุณุงุฆูุฉ ูู ูุฌููุนุฉ ูุงุญุฏุฉ
- โ ุชุนุจุฆุฉ ุชููุงุฆูุฉ ููุฑูุงุจ ูู ุงููุฌููุนุฉ
- โ ุชุนููู ุชูููุชุงุช ูููุตูุฉ ููู ุฑุญูุฉ

### ๐ฅ ุฅุฏุงุฑุฉ ุงูุฑูุงุจ (Passenger Management)

- โ **ูููุงุช ุงูุฑูุงุจ**: ูุนูููุงุช ูุงููุฉ ูุน ุชูุถููุงุช ุงูููู
- โ **ููุงุท ุงูุชุฌูุน ุงูุงูุชุฑุงุถูุฉ**: ุชุนููู Stop ุงูุชุฑุงุถู ููุตุนูุฏ ูุงููุฒูู
- โ **ุฅุญุฏุงุซูุงุช GPS**: ุฏุนู ุงูุฅุญุฏุงุซูุงุช ููุฑูุงุจ ุจุฏูู Stop ุซุงุจุช
- โ **ุญุณุงุจ ุงููุณุงูุฉ**: ุญุณุงุจ ุชููุงุฆู ูููุณุงูุฉ ุจูู ุฅุญุฏุงุซูุงุช ุงูุฑุงูุจ ู Stops ุงููุฑูุจุฉ ุจุงุณุชุฎุฏุงู Haversine formula
- โ **ุงูุชุฑุงุญ ุฐูู**: ุฒุฑ "Suggest Nearest Stop" ูุญุณุงุจ ุงููุณุงูุฉ ูุงูุชุฑุงุญ ุฃูุฑุจ Stop
- โ **ุณุฌู ุงูุฑุญูุงุช**: ุชุงุฑูุฎ ูุงูู ูุฌููุน ุงูุฑุญูุงุช
- โ **ุฅุญุตุงุฆูุงุช ุงูุญุถูุฑ**: ูุนุฏู ุงูุญุถูุฑุ ุนุฏุฏ ุงูุฑุญูุงุชุ ุงูุบูุงุจุงุช
- โ **ุชูุถููุงุช ุงุชุฌุงู ุงูุฑุญูุฉ**: ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุฑุงูุจ ูุณุชููุฏ ูู Pickup & Dropoffุ Pickup Onlyุ ุฃู Dropoff Only
- โ **ุงุณุชุฎุฏุงู GPS ููุตุนูุฏ**: ุฎูุงุฑ ูุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช GPS ููุตุนูุฏ ุจุฏูุงู ูู Stop ุซุงุจุช
- โ **ุงุณุชุฎุฏุงู GPS ููุดุฑูุฉ ูููุฒูู**: ุฎูุงุฑ ูุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ ูููุฒูู ุจุฏูุงู ูู Stop ุซุงุจุช
- โ **ุฅุฏุงุฑุฉ ููู ุงูุฃูุฑ**: ุชูุนูู ุญููู ููู ุงูุฃูุฑ ุจุดูู ูุดุฑูุท (ุงุณู ุงูุฃุจ ูุฑูู ูุงุชููุ ุงุณู ุงูุฃู ูุฑูู ูุงุชููุง)
- โ **ุงูุนููุงู ุงููุคูุช/ุงูุซุงููู**: ุฅุถุงูุฉ ุนููุงู ูุคูุช ุฃู ุซุงููู ูุน ุฅุญุฏุงุซูุงุช GPS ุงูุฎุงุตุฉ ุจู
- โ **ุดุฎุต ุงูุงุชุตุงู ููุนููุงู ุงููุคูุช**: ุงุณู ูุฑูู ูุงุชู ุดุฎุต ุงูุงุชุตุงู ุงููุฑุชุจุท ุจุงูุนููุงู ุงููุคูุช

### ๐ ุฅุฏุงุฑุฉ ุงููุฑูุจุงุช (Vehicle Management)

- โ **ุชูุงูู ูุน Fleet**: ุฑุจุท ูุน ููุฏูู Fleet ูู Odoo
- โ **ูุนูููุงุช ูุฎุตุตุฉ**: ุนุฏุฏ ุงูููุงุนุฏุ ุงูุณุงุฆู ุงูุงูุชุฑุงุถู
- โ **ุชุชุจุน ุงููุฑูุจุงุช**: ููุญุฉ ุฃุฑูุงูุ ุงูุดุฑูุฉุ ุงูููุงุญุธุงุช
- โ **ููุทุฉ ุงูุทูุงู ุงููุฑูุจุฉ**: ุฅุญุฏุงุซูุงุช GPS ูุนููุงู ูููู ุงููุฑูุจุฉ ุงูุซุงุจุช (ููุทุฉ ุงูุจุฏุงูุฉ ููุฑุญูุงุช)
- โ **ุงูุชุญูู ูู ุงูุฅุญุฏุงุซูุงุช**: ูุญุต ุตุญุฉ ุฅุญุฏุงุซูุงุช ูููู ุงููุฑูุจุฉ ุชููุงุฆูุงู

### ๐ ุฅุฏุงุฑุฉ ููุงุท ุงูุชุฌูุน (Stop Management)

- โ **ุฃููุงุน ุงูููุงุท**: Pickup (ุตุนูุฏ)ุ Dropoff (ูุฒูู)ุ Both (ููุงููุง)
- โ **ุฅุญุฏุงุซูุงุช GPS**: ุฏุนู ูุงูู ููุฅุญุฏุงุซูุงุช ุงูุฌุบุฑุงููุฉ
- โ **ุงูุนูุงููู**: ุชูุงุตูู ุงูุนููุงู ุงููุงููุฉ
- โ **ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู**: ุนุฏุฏ ุงููุฑุงุช ุงููุณุชุฎุฏูุฉ
- โ **ุงูุชุญูู ูู ุงูุฅุญุฏุงุซูุงุช**: ูุญุต ุตุญุฉ ุงูุฅุญุฏุงุซูุงุช ุชููุงุฆูุงู

### ๐ ุฅุฏุงุฑุฉ ุงูุฌุฏููุฉ (Schedule Management)

- โ **ุฌุฏูู ุฃุณุจูุนู**: ุฅูุดุงุก ุฌุฏูู ุฃุณุจูุนู ููุฑุญูุงุช ูุน ุฃููุงุช ูุญุฏุฏุฉ ููู ููู (ุงูุฅุซููู - ุงูุฃุญุฏ)
- โ **ุฃููุงุช ูููุตูุฉ**: ุชุญุฏูุฏ ุฃููุงุช ูููุตูุฉ ููุตุนูุฏ ูุงููุฒูู ููู ููู
- โ **ุชูุนูู/ุชุนุทูู ุงูุฃูุงู**: ุฅููุงููุฉ ุชูุนูู ุฃู ุชุนุทูู ุฃูุงู ูุนููุฉ ูู ุงูุฌุฏูู
- โ **ุฅุฏุงุฑุฉ ุงูุนุทู**: ุชุญุฏูุฏ ุฃูุงู ุงูุนุทู ูุงูุงุณุชุซูุงุกุงุช ุงูุชู ูุชู ุงุณุชุซูุงุคูุง ูู ุชูููุฏ ุงูุฑุญูุงุช
- โ **ุชูููุฏ ุชููุงุฆู**: ุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุงูุฌุฏูู ุงูุฃุณุจูุนู ูุน ุงุญุชุฑุงู ุงูุนุทู
- โ **ุฎูุงุฑุงุช ุงูุชูููุฏ**: ุชุญุฏูุฏ ุนุฏุฏ ุงูุฃุณุงุจูุนุ ุชุถููู/ุงุณุชุซูุงุก ุฑุญูุงุช ุงูุตุนูุฏ ุฃู ุงููุฒููุ ุชุญุฏูุฏ ุงูุฃุณุจูุน ุงูุญุงูู ููุท
- โ **Cron Job ุฃุณุจูุนู**: ูููุฉ ูุฌุฏููุฉ ูุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุฃุณุจูุน
- โ **Timezone Support**: ุฏุนู ุงูููุงุทู ุงูุฒูููุฉ ูุชูุณูุฑ ุงูุฃููุงุช ุจุดูู ุตุญูุญ

### ๐ ุงูุฅุดุนุงุฑุงุช ุงูุฐููุฉ (Smart Notifications)

- โ **ูููุงุช ูุชุนุฏุฏุฉ**: SMSุ WhatsAppุ Emailุ Push
- โ **ุฅุดุนุงุฑุงุช ุชููุงุฆูุฉ**:
  - ุฅุดุนุงุฑ ุงูุงูุชุฑุงุจ (Approaching)
  - ุฅุดุนุงุฑ ุงููุตูู (Arrived)
  - ุฅุดุนุงุฑ ุจุฏุก ุงูุฑุญูุฉ
  - ุฅุดุนุงุฑ ุงูุฅูุบุงุก
- โ **ููุงูุจ ูุงุจูุฉ ููุชุฎุตูุต**: ุฑุณุงุฆู ูุฎุตุตุฉ ููู ููุน ุฅุดุนุงุฑ
- โ **ุชุชุจุน ุงูุชุณููู**: ุญุงูุฉ ูู ุฅุดุนุงุฑ (Pending โ Sent โ Delivered โ Failed)
- โ **ุงูุชุญูู ูู ุงูุจูุงูุงุช**: ูุญุต ุตุญุฉ ุฃุฑูุงู ุงูููุงุชู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุชููุงุฆูุงู
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ุงููุชูุฏูุฉ**: ุชุณุฌูู ููุตู ููุฃุฎุทุงุก ูุฅุนุงุฏุฉ ุงููุญุงููุฉ
- โ **ุชูุงูู API**: ุฏุนู ูุงูู ูู SMS ู WhatsApp APIs
- โ **Provider Adapters**: ูุญููุงุช ููุญุฏุฉ ูู Twilio, WhatsApp Business API, Firebase
- โ **Exponential Backoff**: ุฅุนุงุฏุฉ ูุญุงููุฉ ุฐููุฉ ูุน ุชุฃุฎูุฑ ูุชุฒุงูุฏ
- โ **Rate Limiting**: ุชุญุฏูุฏ ุงููุนุฏู ูููุน ุงุณุชููุงุฏ ุญุตุฉ API
- โ **Webhook Support**: ููุงุท ููุงูุฉ ูุงุณุชูุจุงู ุญุงูุฉ ุงูุชุณููู ูู ูุฒูุฏู ุงูุฎุฏูุฉ
- โ **Structured Logging**: ุชุณุฌูู JSON ููุธู ูุชุญููู ุฃูุถู

### ๐ ุงูุชูุงุฑูุฑ ูุงูุชุญูููุงุช

- โ **ุชูุงุฑูุฑ ุงูุฑุญูุงุช**: ููุงุฆู ุงูุฑูุงุจุ ุงูุญุถูุฑุ ุงูุบูุงุจ
- โ **ุงูุชูุงุฑูุฑ ุงูููููุฉ**: ููุฎุต ูููู ูููุฏูุฑูู
- โ **ูุนุฏู ุงูุฅุดุบุงู**: ุชุชุจุน ุงุณุชุฎุฏุงู ุงูููุงุนุฏ
- โ **ุณุฌู ุงูุฅุดุนุงุฑุงุช**: ุฌููุน ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉ ูุน ุชูุงุตูู ุงูุญุงูุฉ

### ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

ูุธุงู ุตูุงุญูุงุช ูู 4 ูุณุชููุงุช:

- **User (ูุณุชุฎุฏู)**: ุนุฑุถ ุงูุฑุญูุงุช ุงูุชู ูุธูุฑ ูููุง ูุฑุงูุจุ ุฅุดุนุงุฑุงุชู ุงูุฎุงุตุฉ
- **Driver (ุณุงุฆู)**: ูุตู ููุท ููุฑุญูุงุช ุงูุชู ูููุฏูุง ุฃู ุงูุชู ูู ูุฑุงูู ูููุง (ูุฑุงุกุฉ/ุชุบููุฑ ุงูุญุงูุฉ)ุ ููุญุฏุซ `trip.line` ุงูุฎุงุตุฉ ุจุฑุญูุชู
- **Dispatcher (ูุดุบูู)**: ุฅูุดุงุก ูุฅุฏุงุฑุฉ ุงููุฌููุนุงุช ุงูุชู ุฃูุดุฃูุง ุฃู ุงูุชู ูุฏูู ุตูุงุญูุฉ ุนูููุง. ูุฑู ููุท ุงูุฑุญูุงุช ุงููุฑุชุจุทุฉ ุจูุฐู ุงููุฌููุนุงุช
- **Manager (ูุฏูุฑ)**: ูุตูู ูุงูู ุจูุง ูู ุฐูู ุงูุญุฐูุ ุงูุฅุนุฏุงุฏุงุชุ ูุฌููุน ุงูุณุฌูุงุช

ุชู ุถุจุท Record Rules ุจุญูุซ:
- ุงููุณุชุฎุฏู ูุงูุณุงุฆู ูุง ูุฑูู ุณูู ุงูุฑุญูุงุชุ ุฎุทูุท ุงูุฑูุงุจุ ูุงูุฅุดุนุงุฑุงุช ุงููุฑุชุจุทุฉ ุจูู
- **ุงููุฑุงูู (Companion)**: ูู ููุณ ุตูุงุญูุงุช ุงูุณุงุฆู - ูุฑู ุงูุฑุญูุงุช ุงูุชู ูู ูุฑุงูู ูููุง ูููููู ุชุญุฏูุซ ุญุงูุฉ ุงูุฑูุงุจ
- **Dispatcher**: ูุฑู ููุท ุงููุฌููุนุงุช ุงูุชู ุฃูุดุฃูุง (`dispatcher_id`) ุฃู ุงูุชู ูุฏูู ุตูุงุญูุฉ ุนูููุง (`dispatcher_group_ids`)
- **Manager**: ูุฏูู ูุตูู ูุงูู ูุฌููุน ุงููุฌููุนุงุช ูุงูุฑุญูุงุชุ ูุน ุงุญุชุฑุงู ุฅุนุฏุงุฏุงุช ุงูู Multi-company

### โก ุงูุชุญุณููุงุช ูุงูุฃุฏุงุก

- โ **ุชุญุณูู ุงูุฃุฏุงุก**: ุญุณุงุจุงุช ูุญุณููุฉ ููุชูููู ูู ุนุฏุฏ ุงูุนูููุงุช
- โ **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุดุงููุฉ ููุงุณุชุซูุงุกุงุช ูู ุฌููุน ุงูุนูููุงุช
- โ **Logging ูุชูุฏู**: ุชุณุฌูู ููุตู ูุฌููุน ุงูุนูููุงุช ูุงูุฃุฎุทุงุก
- โ **ุงูุชุญูู ูู ุงูุจูุงูุงุช**: ูุญุต ุดุงูู ููุจูุงูุงุช ูุจู ุงููุนุงูุฌุฉ
- โ **Cron Jobs ูุญุณููุฉ**: ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ ูุน ุฅุญุตุงุฆูุงุช ููุตูุฉ
- โ **ููุฑุณุฉ ููููุฏ**: ุญููู ุงูุจุญุซ ุงูุณุงุฎูุฉ (state/date/driverุ trip_idุ statusโฆ) ูููุฑุณุฉุ ูุน ูููุฏ ุชููุน ุชุฌุงูุฒ ุณุนุฉ ุงููุฑูุจุฉ ุฃู ุญุฐู ุงูุนูุงุตุฑ ุงููุฑุชุจุทุฉ
- โ **ูุดู ุงูุชุนุงุฑุถุงุช ุงููุญุณูู**: ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุจุงุดุฑุฉ (ูุง N+1) - ุฃุฏุงุก ุฃูุถู ุจู 10x
- โ **Helper Utilities**: ููุชุจุฉ ูุณุงุนุฏุงุช ูุฑูุฒูุฉ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
- โ **Security Utils**: ุญูุงูุฉ ูู ูุฌูุงุช ุงูุญูู ูุนุฑุถ ุงูููุงูุจ ุงูุขูู
- โ **Conflict Detection**: ูุดู ุชุนุงุฑุถุงุช ุงููุฑูุจุงุช ูุงูุณุงุฆููู ูุญุณูู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช

### ๐งฉ ุทุจูุฉ ุฎุฏูุงุช API (Service Layer)

- โ **ุฏูุงู ุฑุญูุงุช ุฑุณููุฉ** (`shuttle.trip`) ูุงุจูุฉ ููุงุณุชุฎุฏุงู ุนุจุฑ JSON-RPC:
  - `action_generate_from_group(...)`: ุฅูุดุงุก ุฑุญูุงุช ูุจุงุดุฑุฉ ูู Passenger Group ุจุฏูู ุงููุฌูุก ููู Wizard
  - `action_start_trip()`, `action_complete_trip()`, `action_cancel_trip()`: ุชูุฑุฌูุน ููุฎุตุงุช (ุนุฏุฏ ุงูุฑุญูุงุชุ ุงูุฅุดุนุงุฑุงุช ุงููุฑุณูุฉุ ุงูุฃุฎุทุงุก)
  - `action_send_approaching_notifications()`, `action_send_arrived_notifications()`: ุฅุฑุณุงู ุดุงูู ููุฅุฎุทุงุฑุงุช ูุน ุฅุญุตุงุฆูุงุช ููู ุฑุญูุฉ
  - `get_dashboard_stats(date_from, date_to, company_id=None)`: ุฅุฑุฌุงุน ุฅุญุตุงุฆูุงุช ุงูุฑุญูุงุช (ุนุฏุฏ ุงูุฑุญูุงุชุ ุงูุฑูุงุจุ ุงูุญุถูุฑุ ุงูุบูุงุจุ ูุชูุณุท ุงูุฅุดุบุงู) ูููุชุฑุฉ ุงููุญุฏุฏุฉ ูุน ุฏุนู ุชุตููุฉ ุงูุดุฑูุฉ
  - `register_gps_position(trip_id, latitude, longitude, speed=None, heading=None, timestamp=None)`: ุงุณุชูุจุงู ููุงุท GPS ูุจุงุดุฑุฉ ูู ุชุทุจูู ุงูุณุงุฆู ุฃู ุฌูุงุฒ ุงูุชุชุจุน
- โ **ุฏูุงู ุฑูุงุจ ุงูุฑุญูุงุช** (`shuttle.trip.line`):
  - `action_mark_boarded()`, `action_mark_absent()`, `action_mark_dropped()` ูุน ุชุญููุงุช ููุญุงูุฉ (ูุซุงู: ูุง ูููู Mark Boarded ุฅุฐุง ูุงูุช ุงูุฑุญูุฉ ุบูุฑ Ongoing)
  - ูุทูุจ ุงุณุชุฌุงุจุฉ ูููููุฉ ูู ูุฐู ุงูุฏูุงูุ ุฃุฑุณู ุงูุณูุงู `{'service_response': True}` ูุน ุงุณุชุฏุนุงุก ุงูู RPC
- โ **ููุฎุตุงุช ูููุฏุฉ**: ูู ุฏุงูุฉ ุชูุนูุฏ ุจูุงูุงุช ูุงุถุญุฉ (trip_idsุ notifications_sentุ errors...) ููุง ูุณูู ุงูุชูุงูู ูุน ุงููุงุฌูุงุช (ููุจ ุฃู ููุจุงูู)
- โ **ุฅุนุงุฏุฉ ุงุณุชุฎุฏุงู ุงูููุทู ุฏุงุฎู Odoo**: ูุง ุญุงุฌุฉ ูุฅุนุงุฏุฉ ูุชุงุจุฉ ุงูู business logic ูู ุฎุฏูุงุช ุฎุงุฑุฌูุฉ
- โ **ุฎุฏูุฉ ุงูุชุฑุงุญ ุฃูุฑุจ ููุทุฉ ุชุฌูุน**: `shuttle.stop.suggest_nearest(lat, lon, limit=1, stop_type=None, company_id=None)` ุชุนูุฏ ุฃูุฑุจ Stops ุจุฅุญุฏุงุซูุงุชูุง ูุงููุณุงูุฉุ ูููุนุงุฏ ุงุณุชุฎุฏุงููุง ูู ุฒุฑ Suggest ูุงููุงุฌูุงุช ุงูุฎุงุฑุฌูุฉ
- โ **ุฎุฏูุฉ ุงูููู ุงูุซุงุจุชุฉ (Enums)**: `shuttle.config.helper.get_enums()` ุชุนูุฏ ุฌููุน ุงูููุงุฆู ุงูุซุงุจุชุฉ (ุญุงูุงุช ุงูุฑุญูุงุชุ ุฃููุงุนูุงุ ุฃููุงุน ุงูููุงุทุ ูููุงุช ุงูุฅุดุนุงุฑ...) ูุงุณุชุฎุฏุงููุง ูู ุงููุงุฌูุงุช ุงูุฎุงุฑุฌูุฉ ุฏูู ุฅุนุงุฏุฉ ุชุนุฑูููุง
- โ **ุฅุนุฏุงุฏุงุช ูุฑูุฒูุฉ ูู Settings โ ShuttleBee**: ูููุงุช ุงูุฅุดุนุงุฑุงุชุ ุงูุชูููุชุงุชุ ุจูุงูุงุช SMS/WhatsAppุ ูุงูููุงูุจ ุชูุฏุงุฑ ูู ุดุงุดุฉ ูุงุญุฏุฉ ูุน ุฏุนู multi-company ูุงูุชุญูู ูู ุงูููู (> 0)
- โ **Trip Timeline ุชููุงุฆู**: ูู ุชุบููุฑ ุญุงูุฉ ุฃู ุฅุฑุณุงู ุฅุดุนุงุฑ ููุณุฌูู ุชููุงุฆูุงู ูู ุงูู chatter ูุชุชุจุน ุงูุฃุญุฏุงุซ
- โ **ุฌุงูุฒูุฉ ููุจูุงุจุฉ ูุงูููุชุฑุฉ**: ุญููู Guardian / Portal Token ุนูู ุงูุฑูุงุจุ ููุนุทูุงุช ุงูููุชุฑุฉ (subscription_price, billing_cycle, is_billable, price) ููุนููุฉ ูู ุงููุฌููุนุงุช ูุงูุฑุญูุงุช

### ๐ฑ Flutter Mobile API (REST) + Live Tracking

ุชูุช ุฅุถุงูุฉ REST endpoints ูุฎุตุตุฉ ููู Flutter ูุฏุนู:
- **ูุฑุงูุจุฉ ุญูุฉ ููุฑุญูุงุช ุงูุฌุงุฑูุฉ** (`ongoing`) ุนูู ุงูุฎุฑูุทุฉ
- **ุชุฃููุฏ ุงูุฑุญูุฉ ูู ุงูุณุงุฆู ูุน ุชูุซูู ููุทุฉ ุงูุชุฃููุฏ** (GPS + ุฃูุฑุจ Stop + ุฑุณุงูุฉ ูุตูุฑุฉ)
- **ุชุชุจุน ุฃููู ููุณุงุฆู/ุงููุฑูุจุฉ ุญุชู ุจุฏูู ุฑุญูุงุช ุฌุงุฑูุฉ** (Heartbeat)

#### ุงููุตุงุฏูุฉ (Authentication)

- โ **Session Cookie** (ููุตู ุจู): ุฌููุน endpoints ุชุนูู ุนุจุฑ `auth='user'` ูุชุญุชุงุฌ ุฌูุณุฉ ูุณุชุฎุฏู Odoo (Cookie `session_id`).
- โ ุตูุงุญูุงุช ุงูุณุงุฆู ูุญููุธุฉ ุนุจุฑ Security Groups/Record Rules (ุงูุณุงุฆู ูุฑู ุฑุญูุงุชู ููุท).

#### JSON-RPC API (search_read)

ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ ูุชุงุญุฉ ุชููุงุฆูุงู ูู `search_read` ุนุจุฑ JSON-RPC API ุงูุงูุชุฑุงุถู ูู Odoo:

**`shuttle.trip` (ุงูุฑุญูุงุช):**
- `companion_id` (integer ุฃู null) - ID ุงููุฑุงูู
- `driver_id` (integer) - ID ุงูุณุงุฆู
- `group_id` (integer ุฃู null) - ID ุงููุฌููุนุฉ ุงููุฑุชุจุทุฉ
- ุฌููุน ุงูุญููู ุงูุฃุฎุฑู ููุฌูุฏุฉ (state, date, planned_start_time, etc.)

**`shuttle.passenger.group` (ูุฌููุนุงุช ุงูุฑูุงุจ):**
- `companion_id` (integer ุฃู null) - ID ุงููุฑุงูู
- `dispatcher_id` (integer) - ID Dispatcher ุงูุฐู ุฃูุดุฃ ุงููุฌููุนุฉ
- `dispatcher_group_ids` (array of integers) - ูุงุฆูุฉ IDs ููู Dispatchers ุงููุตุฑุญ ููู
- ุฌููุน ุงูุญููู ุงูุฃุฎุฑู ููุฌูุฏุฉ (name, driver_id, vehicle_id, etc.)

**`res.users` (ุงููุณุชุฎุฏููู - ููู Dispatchers):**
- `shuttle_dispatcher_group_ids` (array of integers) - ูุงุฆูุฉ IDs ูููุฌููุนุงุช ุงููุตุฑุญ ููู Dispatcher ุจูุง

**ูุซุงู ุนูู ุงุณุชุฎุฏุงู search_read ููุฑุญูุงุช:**
```json
{
  "jsonrpc": "2.0",
  "method": "call",
  "params": {
    "service": "object",
    "method": "execute_kw",
    "args": [
      "database_name",
      user_id,
      "password",
      "shuttle.trip",
      "search_read",
      [
        ["|", ("driver_id", "=", user_id), ("companion_id", "=", user_id), ("state", "=", "ongoing")]
      ],
      {
        "fields": ["id", "name", "driver_id", "companion_id", "group_id", "state", "date", "planned_start_time"],
        "limit": 10
      }
    ]
  },
  "id": 1
}
```

**ูุซุงู ุนูู ุงุณุชุฎุฏุงู search_read ูููุฌููุนุงุช (ููู Dispatcher):**
```json
{
  "jsonrpc": "2.0",
  "method": "call",
  "params": {
    "service": "object",
    "method": "execute_kw",
    "args": [
      "database_name",
      user_id,
      "password",
      "shuttle.passenger.group",
      "search_read",
      [
        ["|", ("dispatcher_id", "=", user_id), ("dispatcher_group_ids", "in", [user_id])]
      ],
      {
        "fields": ["id", "name", "driver_id", "companion_id", "dispatcher_id", "dispatcher_group_ids", "member_count"],
        "limit": 10
      }
    ]
  },
  "id": 1
}
```

**ููุงุญุธุฉ:** Record Rules ุชุญุฏุฏ ุชููุงุฆูุงู ูุง ูููู ููู Dispatcher ุฑุคูุชู (ููุท ุงููุฌููุนุงุช ุงูุชู ุฃูุดุฃูุง ุฃู ุงููุตุฑุญ ูู ุจูุง).

#### Endpoints ุงูุฌุฏูุฏุฉ (ููู Flutter)

- **ุฑุญูุงุช ุงูุณุงุฆู**
  - `GET /api/v1/shuttle/trips/my?state=draft|planned|ongoing|done`
  - ูุชุถูู: `companion_id`, `companion_name`, `group_id`, `group_name`
- **ุชุฃููุฏ ุงูุฑุญูุฉ ูู ุงูุณุงุฆู + ุชูุซูู ููุทุฉ ุงูุชุฃููุฏ**
  - `POST /api/v1/shuttle/trips/<trip_id>/confirm`
  - Body ูุซุงู:
    - `latitude`, `longitude` (ุงุฎุชูุงุฑู)
    - `stop_id` (ุงุฎุชูุงุฑูุ ุฅุฐุง ูู ููุฑุณู ูุชู ุงูุชุฑุงุญ ุฃูุฑุจ Stop ุชููุงุฆูุงู)
    - `note` (ุฑุณุงูุฉ ุตุบูุฑุฉ ููู marker)
- **ุงููุฑุงูุจุฉ ุงูุญูุฉ ููุฑุญูุงุช ุงูุฌุงุฑูุฉ**
  - `GET /api/v1/shuttle/live/ongoing`
  - ูุชุถูู: `companion_id`, `companion_name`
- **ูุณุงุฑ GPS ููุฑุญูุฉ**
  - `GET /api/v1/shuttle/trips/<trip_id>/gps?since=<iso>&limit=500`
- **Heartbeat (ุฃูุงู) ููููุน ุงูุณุงุฆู/ุงููุฑูุจุฉ ุญุชู ุจุฏูู Trip ongoing**
  - `POST /api/v1/shuttle/vehicle/position`

#### ุชูุซูู ุงูุชุฃููุฏ (Confirmation Audit)

ุนูู ููุฏูู `shuttle.trip` ุชูุช ุฅุถุงูุฉ ุญููู:
- `confirm_source` (driver_app / auto / backend)
- `confirmed_by_user_id`, `confirmed_at`
- `confirm_latitude`, `confirm_longitude`
- `confirm_stop_id` (ุฃูุฑุจ ููุทุฉ)
- `confirm_note` (ุฑุณุงูุฉ ุตุบูุฑุฉ)

#### ุงูุชุฃููุฏ ุงูุชููุงุฆู ูุจู ุจุฏุงูุฉ ุงูุฑุญูุฉ

ุชูุช ุฅุถุงูุฉ Cron ูููู ุจุชุฃููุฏ ุงูุฑุญูุงุช `draft` ุชููุงุฆูุงู ูุจู ุงูุจุฏุงูุฉ:
- ุฅุนุฏุงุฏ: `shuttlebee.auto_confirm_minutes_before_start` (ุงูุชุฑุงุถู 60 ุฏูููุฉ)
- Cron: **ShuttleBee: Auto Confirm Upcoming Trips**

### ๐ข ุงูุญููู ุงููุญุณูุจุฉ ูุงูุฌุงูุฒุฉ ููุชูุงุฑูุฑ

- **Shuttle Trip**
  - `total_passengers`, `present_count`, `absent_count`, `boarded_count` ูุฎุฒูุฉ ูุฌุงูุฒุฉ ููุงุณุชููุงู
  - `occupancy_rate` (used seats / total seats) ูุฆููุฉ
  - `planned_duration`, `actual_duration`, `delay_minutes` ูุนุฑุถ ุงูุฃุฏุงุก ููุงุจู ุงูุฎุทุฉ
  - `current_latitude`, `current_longitude`, `last_gps_update` ููุชุญุถูุฑ ูุชุชุจุน GPS ุงููุญุธู
  - `confirm_latitude`, `confirm_longitude`, `confirm_stop_id`, `confirm_note`, `confirmed_at`, `confirm_source` ูุชูุซูู ููุทุฉ/ูุตุฏุฑ ุชุฃููุฏ ุงูุฑุญูุฉ
- **Shuttle Passenger Group**: ุญูู `passenger_count` ูุฎุฒู ูุชูููู ุงูุญุณุงุจุงุชุ ูุน `subscription_price` ู`billing_cycle` ูุณูููุฉ ุงูููุชุฑุฉ
- **Shuttle Stop**: ุญูู `usage_count` ูุฎุฒู ูููุญุฏูุซ ุชููุงุฆูุงู
- **Shuttle Trip Line**
  - `sequence` ูุชุฑุชูุจ ุงูุฑูุงุจ (ููุฌูุฏ ูุณุจูุงู)
  - `boarding_time` ู `absence_reason` ูุชูุซูู ุงูุตุนูุฏ ูุงูุบูุงุจุ ูุน ุฅููุงููุฉ ุชูุฑูุฑ `context={'absence_reason': '...'}`
  - `is_billable`, `price`, `invoice_line_id` ูุชุญุถูุฑ ุงูููุชุฑุฉ
- **Shuttle GPS Position**: ููุฏูู `shuttle.gps.position` ูุฎุฒู ุงููุณุงุฑ ูุน (lat/lon/speed/heading/timestamp) ูููุฑุณ ุญุณุจ ุงูุฑุญูุฉ
- **Shuttle Vehicle Position (Heartbeat)**: ููุฏูู `shuttle.vehicle.position` ูุชุณุฌูู ูููุน ุงูุณุงุฆู/ุงููุฑูุจุฉ ุญุชู ุจุฏูู ุฑุญูุฉ ุฌุงุฑูุฉ (ุญุงูุงุช ุงูุฃูุงู ุงููุงุฏุฑุฉ)

### ๐บ๏ธ ุชุญุณูู ุงููุณุงุฑุงุช (Route Optimizer Integration)

ุชูุงูู ูุน ุฎุฏูุฉ **Route Optimizer API** ูุชุญุณูู ุชุฑุชูุจ ุงูุฑูุงุจ ุชููุงุฆูุงู ูุชูููู ุงููุณุงูุฉ ูุงูููุช.

#### ุงูููุฒุงุช

- โ **ุชุญุณูู ุชููุงุฆู ูููุณุงุฑุงุช**: ุฒุฑ "Optimize Route" ูู ูุงุฌูุฉ ุงูุฑุญูุฉ
- โ **ุฏุนู Google OR-Tools**: ุฎูุงุฑุฒููุฉ VRP (Vehicle Routing Problem) ูุชูุฏูุฉ
- โ **ุฅุนุฏุงุฏุงุช ูุฑูุฉ**: ุชูููู API URLุ ุงูุณุฑุนุฉ ุงููุชูุณุทุฉุ ูููุฉ ุงูุงุชุตุงู
- โ **ุชุญุฏูุซ ุชููุงุฆู ููุชุฑุชูุจ**: ูุชู ุชุญุฏูุซ `sequence` ููู ุฑุงูุจ ุญุณุจ ุงููุณุงุฑ ุงูุฃูุซู
- โ **ุฅุญุตุงุฆูุงุช ุงูุชุญุณูู**: ุงููุณุงูุฉ ุงููุญุณููุฉุ ุงูููุช ุงููุชููุนุ ุญุงูุฉ ุงูุชุญุณูู
- โ **ูุนุงูุฌุฉ ุงูุฑูุงุจ ุบูุฑ ุงููุนูููู**: ุชูุจูู ููุฑูุงุจ ุงูุฐูู ูู ูุชู ุฅุฏุฑุงุฌูู ูู ุงููุณุงุฑ

#### ุงูุฅุนุฏุงุฏุงุช

```
Settings โ ShuttleBee โ ๐บ๏ธ Route Optimizer
```

| ุงูุฅุนุฏุงุฏ | ุงููุตู | ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ |
|---------|-------|-------------------|
| API URL | ุฑุงุจุท ุฎุฏูุฉ Route Optimizer | `https://route-optimizer.geniura.com/optimize` |
| Timeout | ูููุฉ ุงูุงุชุตุงู (ุซุงููุฉ) | 60 |
| Max Solve Time | ุฃูุตู ููุช ููุชุญุณูู (ุซุงููุฉ) | 30 |
| Average Speed | ูุชูุณุท ุงูุณุฑุนุฉ (ูู/ุณ) | 40 |

#### ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู

1. **ุฅุนุฏุงุฏ ููุทุฉ ุงูุงูุทูุงู**:
   - ุญุฏุฏ ุฅุญุฏุงุซูุงุช ูููู ุงููุฑูุจุฉ (`shuttle.vehicle.home_latitude/longitude`)
   - ุฃู ุฅุญุฏุงุซูุงุช ุงูุดุฑูุฉ ูุจุฏูู (`res.company.shuttle_latitude/longitude`)

2. **ุฅุนุฏุงุฏ ููุงุท ุงูุฑูุงุจ**:
   - ูู ุฑุงูุจ ูุญุชุงุฌ ุฅุญุฏุงุซูุงุช GPS (ุนุจุฑ Stop ุฃู ูุจุงุดุฑุฉ)

3. **ุชุญุณูู ุงูุฑุญูุฉ (Shuttle Trip)**:
   - ุงูุชุญ ุงูุฑุญูุฉ ูู ุญุงูุฉ Draft ุฃู Planned
   - ุงุถุบุท ุฒุฑ **๐บ๏ธ Optimize Route**
   - ุฑุงุฌุน ุงููุชุงุฆุฌ ูู ุชุจููุจ **Route Optimization**

4. **ุชุญุณูู ูุงูุจ ุงููุฌููุนุฉ (Passenger Group)** โจ NEW:
   - ุงูุชุญ ูุฌููุนุฉ ุงูุฑูุงุจ
   - ุงุถุบุท ุฒุฑ **๐บ๏ธ Optimize Route** ูู ุงูู header
   - ุณูุชู ุชุญุฏูุซ ุชุฑุชูุจ ุงูุฑูุงุจ ูู ุงููุงูุจ
   - ุฌููุน ุงูุฑุญูุงุช ุงููุณุชูุจููุฉ ุณุชุณุชุฎุฏู ุงูุชุฑุชูุจ ุงูุฌุฏูุฏ
   - ุฑุงุฌุน ุงููุชุงุฆุฌ ูู ุชุจููุจ **๐บ๏ธ Route Optimization**

#### ุญููู ุงูุชุญุณูู ูู `shuttle.trip` ู `shuttle.passenger.group`

| ุงูุญูู | ุงููุตู |
|-------|-------|
| `original_distance_km` | ุงููุณุงูุฉ ูุจู ุงูุชุญุณูู (ูู) |
| `original_duration_min` | ุงูููุช ูุจู ุงูุชุญุณูู (ุฏูููุฉ) |
| `optimized_distance_km` | ุงููุณุงูุฉ ุจุนุฏ ุงูุชุญุณูู (ูู) |
| `optimized_duration_min` | ุงูููุช ุจุนุฏ ุงูุชุญุณูู (ุฏูููุฉ) |
| `distance_saved_km` | ุงููุณุงูุฉ ุงูููููุฑุฉ (ูู) |
| `distance_saved_percent` | ูุณุจุฉ ุงูุชูููุฑ (%) |
| `time_saved_min` | ุงูููุช ุงูููููุฑ (ุฏูููุฉ) |
| `last_optimization_date` | ุชุงุฑูุฎ ุขุฎุฑ ุชุญุณูู |
| `optimization_status` | ุญุงูุฉ ุงูุชุญุณูู (not_optimized, optimized, failed) |
| `optimization_message` | ุฑุณุงูุฉ ูุชูุฌุฉ ุงูุชุญุณูู |
| `unassigned_passengers` | ุงูุฑูุงุจ ุงูุฐูู ูู ูุชู ุชุนููููู (ูู Trip ููุท) |

#### ูุซุงู ุนูู ุทูุจ API

```json
POST https://route-optimizer.geniura.com/optimize
{
  "mode": "PASSENGERS",
  "depot": {"id": "depot", "name": "ูููู ุงูุญุงููุฉ", "lat": 35.7796, "lng": -5.8137},
  "destination": {"id": "school", "name": "ุงููุฏุฑุณุฉ", "lat": 35.7650, "lng": -5.8000},
  "locations": [
    {"id": "123", "name": "ุฃุญูุฏ", "lat": 35.7750, "lng": -5.8200, "passengers": 1},
    {"id": "124", "name": "ูุงุทูุฉ", "lat": 35.7720, "lng": -5.8100, "passengers": 2}
  ],
  "vehicles": [{"id": "bus1", "name": "ุญุงููุฉ 1", "seats": 20}],
  "speed_kmh": 40,
  "max_time_seconds": 30
}
```

#### ุฎุฏูุฉ Python

```python
from shuttlebee.helpers.route_optimizer_service import (
    RouteOptimizerService,
    create_route_optimizer_service,
    RouteOptimizerError
)

# ุฅูุดุงุก ุงูุฎุฏูุฉ ูู ุจูุฆุฉ Odoo
service = create_route_optimizer_service(self.env)

# ุชุญุณูู ูุณุงุฑ ุงูุฑูุงุจ
result = service.optimize_passenger_route(
    depot={'id': 'depot', 'name': 'ุงููุญุทุฉ', 'lat': 35.77, 'lng': -5.81},
    locations=[...],
    vehicles=[...],
    destination={'id': 'dest', 'name': 'ุงููุฏุฑุณุฉ', 'lat': 35.76, 'lng': -5.80}
)

# ูุญุต ุตุญุฉ API
is_healthy = service.health_check()
```

---

## ๐ฆ ุงููุชุทูุจุงุช ูุงูุชุซุจูุช

### ุงููุชุทูุจุงุช ุงูุฃุณุงุณูุฉ

- **Odoo**: ุงูุฅุตุฏุงุฑ 18.0 ุฃู ุฃุญุฏุซ
- **Python**: 3.10 ุฃู ุฃุญุฏุซ
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช**: PostgreSQL 12 ุฃู ุฃุญุฏุซ
- **Python Libraries**: `requests` (ูุฅุฑุณุงู ุงูุฅุดุนุงุฑุงุช)

### ุงูุชุจุนูุงุช

ุงูููุฏูู ูุนุชูุฏ ุนูู:
- `base` - ุงูุฃุณุงุณูุงุช
- `mail` - ุงูุจุฑูุฏ ูุงูุฅุดุนุงุฑุงุช
- `contacts` - ุฅุฏุงุฑุฉ ุฌูุงุช ุงูุงุชุตุงู
- `partner_autocomplete` - ุฅููุงู ุชููุงุฆู ููุดุฑูุงุก
- `fleet` - ุฅุฏุงุฑุฉ ุงูุฃุณุทูู

### ุชุซุจูุช ุงูุชุจุนูุงุช

```bash
# ุชุซุจูุช ุฌููุน ุงูุชุจุนูุงุช ุงููุทููุจุฉ
cd /opt/odoo18/custom_models/shuttlebee
sudo -u odoo18 /opt/odoo18/venv/bin/pip install -r requirements.txt
```

**ุงูุชุจุนูุงุช ุงููุทููุจุฉ:**
- `phonenumbers>=8.13.0` - ููุชุญูู ูู ุฃุฑูุงู ุงูููุงุชู ุงูุฏูููุฉ (ุงุฎุชูุงุฑู ููู ููุตู ุจู)
- `jinja2>=3.0.0` - ูุนุฑุถ ุงูููุงูุจ ุงูุขูู (ุนุงุฏุฉ ููุฌูุฏ ูุน Odoo)
- `requests>=2.28.0` - ูุทูุจุงุช HTTP (ุนุงุฏุฉ ููุฌูุฏ ูุน Odoo)

### ุฎุทูุงุช ุงูุชุซุจูุช

#### 1. ุฅุนุฏุงุฏ ูุฌูุฏ ุงูููุฏูู

```bash
# ุชุฃูุฏ ูู ุฃู ุงุณู ุงููุฌูุฏ ูู shuttlebee (ุจุฃุญุฑู ุตุบูุฑุฉ)
cd /opt/odoo18/custom_models
# ุฅุฐุง ูุงู ุงููุฌูุฏ ุจุงุณู ShuttleBeeุ ูู ุจุฅุนุงุฏุฉ ุชุณููุชู:
mv ShuttleBee shuttlebee
```

#### 2. ุชุซุจูุช ุงูุชุจุนูุงุช

```bash
# ุชุซุจูุช partner_autocomplete ุฃููุงู
sudo -u odoo18 /opt/odoo18/venv/bin/python3 /opt/odoo18/odoo/odoo-bin \
  -c /etc/odoo18.conf \
  -d your_database \
  -i partner_autocomplete \
  --stop-after-init

# ุชุซุจูุช fleet (ุฅุฐุง ูู ููู ูุซุจุชุงู)
sudo -u odoo18 /opt/odoo18/venv/bin/python3 /opt/odoo18/odoo/odoo-bin \
  -c /etc/odoo18.conf \
  -d your_database \
  -i fleet \
  --stop-after-init
```

#### 3. ุชุญุฏูุซ ูุงุฆูุฉ ุงูููุฏููุงุช

```bash
sudo -u odoo18 /opt/odoo18/venv/bin/python3 /opt/odoo18/odoo/odoo-bin \
  -c /etc/odoo18.conf \
  -d your_database \
  -u base \
  --stop-after-init
```

#### 4. ุชุซุจูุช ShuttleBee

**ูู ูุงุฌูุฉ Odoo:**
1. ุงุฐูุจ ุฅูู **Apps**
2. ุงุจุญุซ ุนู **ShuttleBee - Shuttle Management**
3. ุงุถุบุท **Install**

**ุฃู ูู ุณุทุฑ ุงูุฃูุงูุฑ:**
```bash
sudo -u odoo18 /opt/odoo18/venv/bin/python3 /opt/odoo18/odoo/odoo-bin \
  -c /etc/odoo18.conf \
  -d your_database \
  -i shuttlebee \
  --stop-after-init
```

#### 5. ุฅุนุงุฏุฉ ุชุดุบูู Odoo

```bash
sudo systemctl restart odoo18
```

---

## โ๏ธ ุงูุฅุนุฏุงุฏ ุงูุฃููู

### 1. ุฅูุดุงุก ููุงุท ุงูุชุฌูุน (Stops)

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Configuration โ Stops**
2. ุงุถุบุท **Create**
3. ุงููุฃ ุงููุนูููุงุช:
   - **Stop Name**: ุงุณู ุงูููุทุฉ (ูุซูุงู: "ูุญุทุฉ ุงููุฏุฑุณุฉ ุงูุฑุฆูุณูุฉ")
   - **Stop Type**: Pickup / Dropoff / Both
   - **Address**: ุงูุนููุงู ุงููุงูู
   - **GPS Coordinates**: ุงูุฅุญุฏุงุซูุงุช (Latitude, Longitude)
4. ุงุญูุธ

**ูุซุงู:**
```
Stop Name: ูุญุทุฉ ุงููุฏุฑุณุฉ
Stop Type: Both
City: ุงูุฏุงุฑ ุงูุจูุถุงุก
Latitude: 33.5731
Longitude: -7.5898
```

### 2. ุชุณุฌูู ุงูุฑูุงุจ (Passengers)

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Passengers**
2. ุงุถุบุท **Create**
3. ุงููุฃ ุงููุนูููุงุช:
   - **Name**: ุงุณู ุงูุฑุงูุจ
   - **Is Shuttle Passenger**: โ
   - **Phone/Mobile**: ุฑูู ุงููุงุชู (ูุทููุจ ููุฅุดุนุงุฑุงุช)
   - **Email**: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู (ูุทููุจ ูุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ)
   - **Default Pickup Stop**: ููุทุฉ ุงูุตุนูุฏ ุงูุงูุชุฑุงุถูุฉ
   - **Default Dropoff Stop**: ููุทุฉ ุงููุฒูู ุงูุงูุชุฑุงุถูุฉ
   - **GPS Coordinates**: ุฅุฐุง ูู ููู ูู Stop ุซุงุจุช
4. ูู ุชุจููุจ **Shuttle Information**:
   - **Guardian Information**: ูุนูู **Has Guardian** ูุฅุธูุงุฑ ุญููู ููู ุงูุฃูุฑ:
     - **Father Information**:
       - **Father Name**: ุงุณู ุงูุฃุจ
       - **Father Phone**: ุฑูู ูุงุชู ุงูุฃุจ
     - **Mother Information**:
       - **Mother Name**: ุงุณู ุงูุฃู
       - **Mother Phone**: ุฑูู ูุงุชู ุงูุฃู
   - **Temporary/Secondary Address**: ุฃุฏุฎู ุงูุนููุงู ุงููุคูุช ุฃู ุงูุซุงููู:
     - **Temporary/Secondary Address**: ุงูุนููุงู ุงููุงูู
     - **Temporary Latitude**: ุฎุท ุงูุนุฑุถ ููุฅุญุฏุงุซูุงุช ุงููุคูุชุฉ
     - **Temporary Longitude**: ุฎุท ุงูุทูู ููุฅุญุฏุงุซูุงุช ุงููุคูุชุฉ
     - **Contact Name**: ุงุณู ุดุฎุต ุงูุงุชุตุงู ุงููุฑุชุจุท ุจูุฐุง ุงูุนููุงู
     - **Contact Phone**: ุฑูู ูุงุชู ุดุฎุต ุงูุงุชุตุงู
5. ุงุญูุธ

**ููุงุญุธุฉ**: ูููู ููุฑุงูุจ ุฃู ูููู ูู:
- **Stop ุซุงุจุช**: ูุชู ุชุนูููู ูู Default Pickup/Dropoff Stop
- **ุฅุญุฏุงุซูุงุช GPS**: ูุชู ุฅุฏุฎุงููุง ูู Shuttle Information โ GPS Coordinates
- **ูุฒูุฌ**: ูููู ุฎูุท ุงูุฑูุงุจ (ุจุนุถูู ุจู Stopุ ูุจุนุถูู ุจุฅุญุฏุงุซูุงุช) ูู ููุณ ุงููุฌููุนุฉ
- **ููู ุฃูุฑ**: ูููู ุชูุนูู ุญููู ููู ุงูุฃูุฑ ุนูุฏ ุงูุญุงุฌุฉ (ูุซู ุงูุทูุงุจ ุงูุตุบุงุฑ) - ุงุณู ูุฑูู ูุงุชู ุงูุฃุจ ูุงูุฃู
- **ุนููุงู ูุคูุช**: ูููู ุฅุถุงูุฉ ุนููุงู ูุคูุช ุฃู ุซุงููู ูุน ุฅุญุฏุงุซูุงุชู ูุงุณู ูุฑูู ูุงุชู ุดุฎุต ุงูุงุชุตุงู

### 3. ุฅูุดุงุก ูุฑูุจุฉ (Vehicle)

**ุงูุฎุทูุงุช:**
1. ุฃููุงูุ ุฃูุดุฆ ูุฑูุจุฉ ูู **Fleet โ Vehicles**
2. ุงุฐูุจ ุฅูู **ShuttleBee โ Configuration โ Vehicles**
3. ุงุถุบุท **Create**
4. ุงููุฃ ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ:
   - **Vehicle Name**: ุงุณู ุงููุฑูุจุฉ
   - **Fleet Vehicle**: ุงุฎุชุฑ ุงููุฑูุจุฉ ูู Fleet
   - **Seat Capacity**: ุนุฏุฏ ุงูููุงุนุฏ
   - **Default Driver**: ุงูุณุงุฆู ุงูุงูุชุฑุงุถู
5. ูู ุชุจููุจ **Parking Location**ุ ุญุฏุฏ ูููู ุงููุฑูุจุฉ ุงูุซุงุจุช:
   - **Parking Latitude**: ุฎุท ุงูุนุฑุถ ููููู ุงููุฑูุจุฉ (ูุซุงู: 33.5731)
   - **Parking Longitude**: ุฎุท ุงูุทูู ููููู ุงููุฑูุจุฉ (ูุซุงู: -7.5898)
   - **Parking Address**: ุงูุนููุงู ุงููุนูู ูููููู (ุงุฎุชูุงุฑู)
6. ุงุญูุธ

**ููุงุญุธุฉ ูููุฉ**: ูููู ุงููุฑูุจุฉ ูู ุงูููุทุฉ ุงูุซุงุจุชุฉ ุงูุชู ุชูุทูู ูููุง ุงููุฑูุจุฉ ูุชุฑุฌุน ุฅูููุงุ ูููุณุชุฎุฏู ูู:
- ุญุณุงุจ ุงููุณุงูุงุช ุงููููุฉ ููุฑุญูุฉ
- ุชุฎุทูุท ุงููุณุงุฑุงุช ุงูุฃูุซู
- ุชูุฏูุฑ ุฃููุงุช ุงููุตูู

### 4. ุฅุนุฏุงุฏ ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **Settings โ Companies โ Companies**
2. ุงุฎุชุฑ ุงูุดุฑูุฉ
3. ูู ุชุจููุจ **Shuttle Information**:
   - ุฃุฏุฎู **Company Latitude** ู **Company Longitude**
   - ุงุฎุชุฑ **Schedule Timezone** (ูุซู: Africa/Casablanca)
4. ุงุญูุธ

**ููุงุญุธุฉ**: ูุฐู ุงูุฅุญุฏุงุซูุงุช ุณุชูุณุชุฎุฏู ููุฌูุฉ ุงูุชุฑุงุถูุฉ ููุฑูุงุจ ุงูุฐูู ูุณุชุฎุฏููู "Use Company GPS Coordinates for Dropoff".

### 5. ุฅูุดุงุก ูุฌููุนุฉ ุฑูุงุจ (Passenger Group)

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Passenger Groups**
2. ุงุถุบุท **Create**
3. ุงููุฃ ุงููุนูููุงุช:
   - **Group Name**: ุงุณู ุงููุฌููุนุฉ (ูุซูุงู: "ูุณุงุฑ ุงููุฏุฑุณุฉ - ุงูุตุจุงุญ")
   - **Trip Type**: Pickup / Dropoff / Both
   - **Use Company Destination**: โ (ููุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ ููุฌูุฉ)
   - **Destination Stop**: ููุทุฉ ุงููุฌูุฉ ุงููุดุชุฑูุฉ (ูุซู ุงููุฏุฑุณุฉ) - **ููู**: ุณูุชู ุงุณุชุฎุฏุงููุง ุชููุงุฆูุงู ููุฑูุงุจ ุจุฏูู Stop ูุญุฏุฏ
   - **Default Driver**: ุงูุณุงุฆู ุงูุงูุชุฑุงุถู (ูุชู ุชุนูููู ุชููุงุฆูุงู ุนูุฏ ุงุฎุชูุงุฑ ุงููุฑูุจุฉ)
   - **Vehicle**: ุงููุฑูุจุฉ ุงูุงูุชุฑุงุถูุฉ (ูุชู ุฌูุจ ุงูุณุงุฆู ูุนุฏุฏ ุงูููุงุนุฏ ุชููุงุฆูุงู)
   - **Seat Capacity**: ุนุฏุฏ ุงูููุงุนุฏ
4. ูู ุชุจููุจ **Passengers**ุ ุฃุถู ุงูุฑูุงุจ:
   - ุงุถุบุท **Add a line**
   - ุงุฎุชุฑ **Passenger** (ุณูุชู ุฌูุจ ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ ุชููุงุฆูุงู)
   - **Pickup Details**: ูุนุฑุถ ุงุณู ุงููุญุทุฉ ุฃู ุงุณู ุงูุฑุงูุจ + ุงูุนููุงู
   - **Pickup Stop**: ูุญุทุฉ ุงูุตุนูุฏ (ุงุฎุชูุงุฑู - ุณูุณุชุฎุฏู GPS ุฅุฐุง ูู ูุชู ุชุญุฏูุฏู)
   - **Dropoff Details**: ูุนุฑุถ ุงุณู ุงูุดุฑูุฉ + ุงูุนููุงู ุฅุฐุง ูุงู "Use Company GPS" ููุนูุ ุฃู ุงุณู ุงููุญุทุฉ ุฃู ุงุณู ุงูุฑุงูุจ
   - **Dropoff Stop**: ูุญุทุฉ ุงููุฒูู (ุงุฎุชูุงุฑู - ุณูุณุชุฎุฏู ุฅุญุฏุงุซูุงุช ุงูุดุฑูุฉ ุฅุฐุง ูุงู "Use Company GPS" ููุนู)
   - **Seats**: ุนุฏุฏ ุงูููุงุนุฏ ุงููุทููุจุฉ
5. ูู ุชุจููุจ **Schedule**ุ ุฃูุดุฆ ุงูุฌุฏูู ุงูุฃุณุจูุนู:
   - **Schedule Timezone**: ุงูููุทูุฉ ุงูุฒูููุฉ ูุชูุณูุฑ ุงูุฃููุงุช (ุงูุชุฑุงุถู: ูู ุงูุดุฑูุฉ)
   - ุงุถุบุท **Add a line** ูุฅุถุงูุฉ ุฃูุงู ุงูุฃุณุจูุน
   - ููู ููู:
     - **Weekday**: ุงูููู (ุงูุฅุซููู - ุงูุฃุญุฏ)
     - **Pickup Time**: ููุช ุงูุตุนูุฏ (ูุซู: 07:00)
     - **Create Pickup**: โ (ูุฅูุดุงุก ุฑุญูุฉ ุตุนูุฏ)
     - **Dropoff Time**: ููุช ุงููุฒูู (ูุซู: 15:45)
     - **Create Dropoff**: โ (ูุฅูุดุงุก ุฑุญูุฉ ูุฒูู)
     - **Active**: โ (ูุชูุนูู ุงูููู)
6. ูู ุชุจููุจ **Holidays / Exceptions**ุ ุฃุถู ุงูุนุทู:
   - ุงุถุบุท **Add a line**
   - **Name**: ุงุณู ุงูุนุทูุฉ (ูุซู: "ุนูุฏ ุงููุทุฑ")
   - **Start Date**: ุชุงุฑูุฎ ุงูุจุฏุงูุฉ
   - **End Date**: ุชุงุฑูุฎ ุงูููุงูุฉ
   - **Active**: โ
7. ุงุญูุธ

**ูุซุงู:**
```
Group Name: ูุณุงุฑ ุงููุฏุฑุณุฉ - ุงูุตุจุงุญ
Trip Type: Pickup
Destination Stop: ุงููุฏุฑุณุฉ ุงูุฑุฆูุณูุฉ (Both)
Default Driver: ุฃุญูุฏ ูุญูุฏ
Vehicle: ุญุงููุฉ 01
Seat Capacity: 20
Passengers:
  - ูุญูุฏ ุนูู โ Pickup Stop: ูุญุทุฉ ุงููุฏุฑุณุฉ (Dropoff: ุงููุฏุฑุณุฉ ุชููุงุฆูุงู)
  - ูุงุทูุฉ ุฃุญูุฏ โ GPS: (33.5731, -7.5898) (Dropoff: ุงููุฏุฑุณุฉ ุชููุงุฆูุงู)
  - ุฎุงูุฏ ุญุณู โ Pickup Stop: ูุญุทุฉ ุงููุฏุฑุณุฉ (Dropoff: ุงููุฏุฑุณุฉ ุชููุงุฆูุงู)
```

**ููุงุญุธุงุช ูููุฉ:**
- **Destination Stop**: ุนูุฏ ุฅูุดุงุก ุฑุญูุฉ Pickupุ ุณูุชู ุงุณุชุฎุฏุงู Destination Stop ูู Dropoff Stop ุชููุงุฆูุงู ููุฑูุงุจ ุงูุฐูู ููุณ ูุฏููู Dropoff Stop ูุญุฏุฏ
- ุนูุฏ ุฅูุดุงุก ุฑุญูุฉ Dropoffุ ุณูุชู ุงุณุชุฎุฏุงู Destination Stop ูู Pickup Stop ุชููุงุฆูุงู
- **ุฒุฑ Suggest Nearest**: ูุธูุฑ ููุท ููุฑูุงุจ ุงูุฐูู ูุฏููู ุฅุญุฏุงุซูุงุช GPSุ ููุญุณุจ ุงููุณุงูุฉ ูููุชุฑุญ ุฃูุฑุจ Stop

### 6. ุชูููุฏ ุงูุฑุญูุงุช ูู ุงูุฌุฏูู

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Passenger Groups**
2. ุงุฎุชุฑ ุงููุฌููุนุฉ ุงููุทููุจุฉ
3. ุงุถุบุท **Generate Schedule Trips**
4. ุงููุฃ ุงููุนูููุงุช:
   - **Start Date**: ุชุงุฑูุฎ ุงูุจุฏุก
   - **Weeks**: ุนุฏุฏ ุงูุฃุณุงุจูุน (ุงูุชุฑุงุถู: 1)
   - **Include Pickup**: โ (ูุชุถููู ุฑุญูุงุช ุงูุตุนูุฏ)
   - **Include Dropoff**: โ (ูุชุถููู ุฑุญูุงุช ุงููุฒูู)
   - **Limit to Current Week**: โ (ูุชูููุฏ ุงูุฑุญูุงุช ููุฃุณุจูุน ุงูุญุงูู ููุท)
5. ุงุถุบุท **Generate Trips**

**ุงููุชูุฌุฉ:**
- ูุชู ุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุงูุฌุฏูู ุงูุฃุณุจูุนู
- ูุชู ุงุณุชุซูุงุก ุฃูุงู ุงูุนุทู ุชููุงุฆูุงู
- ูุชู ุงุญุชุฑุงู ุชูุถููุงุช ุงูุฑูุงุจ (Pickup Only, Dropoff Only, Both)

### 7. ุฅุนุฏุงุฏ ุงูุฅุดุนุงุฑุงุช

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **Settings โ ShuttleBee**
2. ุงููุฃ ุงูุฅุนุฏุงุฏุงุช:
   - **Default Notification Channel**: SMS / WhatsApp / Email / Push
   - **Approaching Minutes**: ุนุฏุฏ ุงูุฏูุงุฆู ูุจู ุงููุตูู ูุฅุฑุณุงู ุงูุฅุดุนุงุฑ (ุงูุชุฑุงุถู: 10)
   - **Absent Timeout**: ุนุฏุฏ ุงูุฏูุงุฆู ุจุนุฏ ุจุฏุก ุงูุฑุญูุฉ ูุงุนุชุจุงุฑ ุงูุฑุงูุจ ุบุงุฆุจุงู (ุงูุชุฑุงุถู: 5)
   - **SMS API URL**: ุฑุงุจุท API ูุฅุฑุณุงู SMS
   - **SMS API Key**: ููุชุงุญ API ูุฅุฑุณุงู SMS
   - **WhatsApp API URL**: ุฑุงุจุท API ูุฅุฑุณุงู WhatsApp
   - **WhatsApp API Key**: ููุชุงุญ API ูุฅุฑุณุงู WhatsApp
   - **Message Templates**: ููุงูุจ ุงูุฑุณุงุฆู (ูููู ุชุฎุตูุตูุง)

**ููุงุญุธุฉ**: ูุฌุจ ุชูููู API credentials ุจุดูู ุตุญูุญ ูุฅุฑุณุงู SMS ู WhatsApp. ุงููุธุงู ูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช ูุจู ุงูุฅุฑุณุงู.

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุนููู

### ุณููุงุฑูู 1: ุฅูุดุงุก ุฑุญูุฉ ููููุฉ ูู ูุฌููุนุฉ

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Passenger Groups**
2. ุงุฎุชุฑ ุงููุฌููุนุฉ ุงููุทููุจุฉ
3. ุงุถุบุท **Generate Trip**
4. ุงููุฃ ุงููุนูููุงุช:
   - **Trip Date**: ุชุงุฑูุฎ ุงูุฑุญูุฉ
   - **Create Pickup Trip**: โ (ูุฑุญูุฉ ุงูุตุจุงุญ)
   - **Pickup Start Time**: ููุช ุจุฏุก ุงูุฑุญูุฉ ุงูุตุจุงุญูุฉ
   - **Create Dropoff Trip**: โ (ูุฑุญูุฉ ุงููุณุงุก)
   - **Dropoff Start Time**: ููุช ุจุฏุก ุงูุฑุญูุฉ ุงููุณุงุฆูุฉ
5. ุงุถุบุท **Generate Trips**

**ุงููุชูุฌุฉ:**
- ูุชู ุฅูุดุงุก ุฑุญูุชูู: ูุงุญุฏุฉ ููุตุจุงุญ ูุฃุฎุฑู ูููุณุงุก
- ูุชู ุชุนุจุฆุฉ ุงูุฑูุงุจ ุชููุงุฆูุงู ูู ุงููุฌููุนุฉ
- ูุชู ุชุนููู ุงูุณุงุฆู ูุงููุฑูุจุฉ ูู ุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ

### ุณููุงุฑูู 2: ุฅูุดุงุก ุฑุญูุฉ ูุฏููุงู

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Trips**
2. ุงุถุบุท **Create**
3. ุงููุฃ ุงููุนูููุงุช:
   - **Trip Type**: Pickup / Dropoff
   - **Date**: ุชุงุฑูุฎ ุงูุฑุญูุฉ
   - **Passenger Group**: **ุฅูุฒุงูู** - ุงุฎุชุฑ ุงููุฌููุนุฉ
   - **Driver**: ูุชู ุชุนุจุฆุชู ุชููุงุฆูุงู ูู ุงููุฌููุนุฉ
   - **Vehicle**: ูุชู ุชุนุจุฆุชู ุชููุงุฆูุงู ูู ุงููุฌููุนุฉ
   - **Planned Start Time**: ููุช ุงูุจุฏุก ุงููุฎุทุท
   - **Planned Arrival Time**: ููุช ุงููุตูู ุงููุฎุทุท
4. ูู ุชุจููุจ **Passengers**: ูุชู ุชุนุจุฆุฉ ุงูุฑูุงุจ ุชููุงุฆูุงู ูู ุงููุฌููุนุฉ
5. ุงุถุบุท **Confirm Trip** ูุชุบููุฑ ุงูุญุงูุฉ ุฅูู Planned

**ููุงุญุธุฉ ูููุฉ**: ูุง ูููู ุฅุถุงูุฉ ุฑูุงุจ ูุฏููุงู. ูุฌุจ ุฃู ูููููุง ูู Passenger Group ุงููุฑุชุจุท ุจุงูุฑุญูุฉ.

### ุณููุงุฑูู 3: ุฅุฏุงุฑุฉ ุงูุฑุญูุฉ (ูู ูุจู ุงูุณุงุฆู)

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Trips**
2. ุงุฎุชุฑ ุงูุฑุญูุฉ ุงููุทููุจุฉ
3. ุงุถุบุท **Start Trip** ุนูุฏ ุจุฏุก ุงูุฑุญูุฉ
4. ูู ุชุจููุจ **Passengers**:
   - ุงุถุบุท **Send Approaching Notification** ูุฅุฑุณุงู ุฅุดุนุงุฑ ุงูุงูุชุฑุงุจ
   - ุงุถุบุท **Send Arrived Notification** ุนูุฏ ุงููุตูู
   - ุงุถุบุท **Mark Boarded** ุนูุฏ ุตุนูุฏ ุฑุงูุจ ูุงุญุฏ (ุณูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุขุฎุฑูู ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุตุนุฏ" ุชููุงุฆูุงู)
   - ุงุถุบุท **Mark Absent** ุฅุฐุง ูู ูุญุถุฑ ุงูุฑุงูุจ
5. ุนูุฏ ุงูุงูุชูุงุกุ ุงุถุบุท **Complete Trip** (ุณูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุญุงุถุฑ" ุชููุงุฆูุงู)

**ููุงุญุธุฉ ูููุฉ:**
- ุนูุฏ ุงูุถุบุท ุนูู **Mark Boarded** ูุฑุงูุจ ูุงุญุฏุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุขุฎุฑูู ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุตุนุฏ" ุชููุงุฆูุงู
- ุนูุฏ ุงูุถุบุท ุนูู **Complete Trip**ุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุญุงุถุฑ" ุชููุงุฆูุงู (boarded ูุฑุญูุงุช pickupุ dropped ูุฑุญูุงุช dropoff)

### ุณููุงุฑูู 4: ุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช GPS ูุงูุชุฑุงุญ ุฃูุฑุจ Stop

**ุงูุญุงูุฉ**: ุฑุงูุจ ุตุบูุฑ ูุง ููููู ุงูุฐูุงุจ ุฅูู Stop ุซุงุจุช

**ุงูุฎุทูุงุช:**
1. ุงุฐูุจ ุฅูู **ShuttleBee โ Operations โ Passengers**
2. ุงุฎุชุฑ ุงูุฑุงูุจ
3. ูู ุชุจููุจ **Shuttle Information**:
   - ุงุชุฑู **Default Pickup Stop** ูุงุฑุบุงู
   - ุฃุฏุฎู **Latitude** ู **Longitude**
4. ุนูุฏ ุฅุถุงูุฉ ุงูุฑุงูุจ ููุฌููุนุฉ:
   - ุงูุชุญ ุงูุฑุงูุจ ูู form view (ุงุถุบุท ุนูู ุงูุณุทุฑ ูู ูุงุฆูุฉ ุงูุฑูุงุจ)
   - ุจุฌุงูุจ **Pickup Stop**ุ ุงุถุบุท ุฒุฑ **"Suggest Nearest"** (ูุธูุฑ ููุท ุฅุฐุง ูุงู ููุฑุงูุจ ุฅุญุฏุงุซูุงุช)
   - ุณูุชู ุญุณุงุจ ุงููุณุงูุฉ ูุงูุชุฑุงุญ ุฃูุฑุจ Stop ุชููุงุฆูุงู ูุน ุนุฑุถ ุงููุณุงูุฉ ุจุงููููููุชุฑุงุช
   - ููููู ุงูููุงููุฉ ุนูู ุงูุงูุชุฑุงุญ ุฃู ุงุฎุชูุงุฑ Stop ุขุฎุฑ
5. ุนูุฏ ุฅูุดุงุก ุงูุฑุญูุฉ:
   - ุฅุฐุง ูุงู ููุฑุงูุจ Stop: ุณูุชู ุงุณุชุฎุฏุงูู
   - ุฅุฐุง ูู ููู ูู Stop: ุณูุชู ุงุณุชุฎุฏุงู ุงูุฅุญุฏุงุซูุงุช ุชููุงุฆูุงู
   - ุฅุฐุง ูู ููู ูู Stop ููุง ุฅุญุฏุงุซูุงุช: ุณูุชู ุงุณุชุฎุฏุงู Destination Stop ูู ุงููุฌููุนุฉ

### ุณููุงุฑูู 5: ุงุณุชุฎุฏุงู Destination Stop (ุงููุฏุฑุณุฉ/ุงูุนูู)

**ุงูุญุงูุฉ**: ุฌููุน ุงูุฑูุงุจ ูุฐูุจูู ูููุณ ุงููุฌูุฉ (ูุซู ุงููุฏุฑุณุฉ)

**ุงูุฎุทูุงุช:**
1. ุฃูุดุฆ Stop ูููุฏุฑุณุฉ ูู ููุน "Both" (Pickup & Dropoff)
2. ูู Passenger Group:
   - ุงุฎุชุฑ **Destination Stop** = ุงููุฏุฑุณุฉ
3. ุนูุฏ ุฅุถุงูุฉ ุงูุฑูุงุจ:
   - ููุฑูุงุจ ูู ุฑุญูุฉ Pickup: ุญุฏุฏ ููุท **Pickup Stop** (ููุฒููู)
   - **Dropoff Stop** ุณูุชู ุชุนูููู ุชููุงุฆูุงู = ุงููุฏุฑุณุฉ (ูู Destination Stop)
4. ุนูุฏ ุฅูุดุงุก ุงูุฑุญูุฉ:
   - **ุฑุญูุฉ Pickup**: ูู ุงูููุงุฒู โ ุงููุฏุฑุณุฉ (ุชููุงุฆูุงู)
   - **ุฑุญูุฉ Dropoff**: ูู ุงููุฏุฑุณุฉ โ ุงูููุงุฒู (ุชููุงุฆูุงู)

**ูุซุงู ุนููู:**
```
Passenger Group:
  - Destination Stop: ุงููุฏุฑุณุฉ ุงูุฑุฆูุณูุฉ
  - Passengers:
    - ูุญูุฏ โ Pickup: ููุฒูู (Dropoff: ุงููุฏุฑุณุฉ ุชููุงุฆูุงู)
    - ูุงุทูุฉ โ Pickup: ููุฒููุง (Dropoff: ุงููุฏุฑุณุฉ ุชููุงุฆูุงู)
    - ุฎุงูุฏ โ Pickup: GPS (Dropoff: ุงููุฏุฑุณุฉ ุชููุงุฆูุงู)

ุนูุฏ ุฅูุดุงุก ุฑุญูุฉ Pickup:
  - ุฌููุน ุงูุฑูุงุจ: Pickup ูู ููุงุฒููู/GPS โ Dropoff ูู ุงููุฏุฑุณุฉ (ุชููุงุฆูุงู)
```

---

## ๐ ุงูููุงู ุงููุฌุฏููุฉ (Cron Jobs)

ุงูููุฏูู ูุญุชูู ุนูู 3 ููุงู ูุฌุฏููุฉ ูุน ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ:

### 1. ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุงูุงูุชุฑุงุจ
- **ุงูุชูุฑุงุฑ**: ูู 5 ุฏูุงุฆู
- **ุงููุธููุฉ**: ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ููุฑูุงุจ ุนูุฏ ุงูุชุฑุงุจ ุงูุณุงุฆู
- **ุงูุฅุนุฏุงุฏ**: ูููู ุชุนุฏูู ุนุฏุฏ ุงูุฏูุงุฆู ูู Settings
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ุชุณุฌูู ููุตู ููุฃุฎุทุงุก ูุน ุฅุญุตุงุฆูุงุช (ุนุฏุฏ ุงููุฌุงุญุงุช/ุงูุฃุฎุทุงุก)

### 2. ุชุญุฏูุฏ ุงูุฑูุงุจ ุงูุบุงุฆุจูู
- **ุงูุชูุฑุงุฑ**: ูู 10 ุฏูุงุฆู
- **ุงููุธููุฉ**: ุชุญุฏูุฏ ุงูุฑูุงุจ ูุบุงุฆุจูู ุจุนุฏ ุงูุชูุงุก ุงูููุช ุงููุญุฏุฏ
- **ุงูุฅุนุฏุงุฏ**: ูููู ุชุนุฏูู ุงูููุช ูู Settings
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก ูุน ุชุณุฌูู ููุตู

### 3. ุงูููุฎุต ุงููููู
- **ุงูุชูุฑุงุฑ**: ูุฑุฉ ูุงุญุฏุฉ ููููุงู
- **ุงููุธููุฉ**: ุฅุฑุณุงู ููุฎุต ูููู ูููุฏูุฑูู
- **ุงููุญุชูู**: ุนุฏุฏ ุงูุฑุญูุงุชุ ุงูุฑูุงุจุ ุงูุญุถูุฑุ ุงูุบูุงุจุ ูุนุฏู ุงูุญุถูุฑ
- **ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก**: ูุญุต ูุฌูุฏ ุงููุฏูุฑูู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุจู ุงูุฅุฑุณุงู

### 4. ุชูููุฏ ุงูุฑุญูุงุช ุงูุฃุณุจูุนูุฉ ูู ุงูุฌุฏูู
- **ุงูุชูุฑุงุฑ**: ูู ููู ุณุจุช ุงูุณุงุนุฉ 08:00
- **ุงููุธููุฉ**: ุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุงูุฌุฏูู ุงูุฃุณุจูุนู ูููุฌููุนุงุช ุงูุชู ูุฏููุง "Auto Schedule Enabled" ููุนู
- **ุงูุฅุนุฏุงุฏ**: ูููู ุชูุนูู/ุชุนุทูู ูู ุชุจููุจ Automation ูู Passenger Group
- **ุงููุนุงููุงุช**: 
  - `auto_schedule_weeks`: ุนุฏุฏ ุงูุฃุณุงุจูุน ุงููุทููุจ ุชูููุฏูุง (ุงูุชุฑุงุถู: 1)
  - `auto_schedule_include_pickup`: ุชุถููู ุฑุญูุงุช ุงูุตุนูุฏ (ุงูุชุฑุงุถู: True)
  - `auto_schedule_include_dropoff`: ุชุถููู ุฑุญูุงุช ุงููุฒูู (ุงูุชุฑุงุถู: True)

---

## ๐๏ธ ุงูุจููุฉ ุงูุชูููุฉ

### ุงูููุงุฐุฌ ุงูุฑุฆูุณูุฉ (Models)

#### 1. `shuttle.passenger.group`
**ุงููุตู**: ูุงูุจ ุงููุฌููุนุฉ (Template)
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: name, driver_id, vehicle_id, total_seats, trip_type, destination_stop_id
- **ุงูุนูุงูุงุช**: line_ids (One2many ุฅูู shuttle.passenger.group.line)
- **ุงููุธุงุฆู**: 
  - `_prepare_trip_line_values()`: ุชุญุถูุฑ ููู ุงูุฑูุงุจ ููุฑุญูุฉ ูุน ุงุณุชุฎุฏุงู Destination Stop ุชููุงุฆูุงู
  - `action_open_generate_trip_wizard()`: ูุชุญ ููุฒุงุฑุฏ ุฅูุดุงุก ุงูุฑุญูุงุช

#### 2. `shuttle.passenger.group.line`
**ุงููุตู**: ุฑุงูุจ ูู ุงููุฌููุนุฉ
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: passenger_id, pickup_stop_id, dropoff_stop_id, seat_count
- **ุงูุนูุงูุงุช**: group_id (Many2one ุฅูู shuttle.passenger.group)
- **ุงููุธุงุฆู**:
  - `_calculate_distance()`: ุญุณุงุจ ุงููุณุงูุฉ ุจูู ุฅุญุฏุงุซูุงุช GPS ุจุงุณุชุฎุฏุงู Haversine formula
  - `action_suggest_nearest_stop()`: ุงูุชุฑุงุญ ุฃูุฑุจ Stop ุจูุงุกู ุนูู ุฅุญุฏุงุซูุงุช ุงูุฑุงูุจ

#### 3. `shuttle.trip`
**ุงููุตู**: ุฑุญูุฉ ูุนููุฉ
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: name, date, trip_type, driver_id, vehicle_id, group_id (ุฅูุฒุงูู)
- **ุงูุญุงูุงุช**: draft, planned, ongoing, done, cancelled
- **ุงูุนูุงูุงุช**: 
  - group_id (Many2one ุฅูู shuttle.passenger.group) - **ุฅูุฒุงูู**
  - line_ids (One2many ุฅูู shuttle.trip.line)
- **ุงูุชุญููุงุช**: ูุญุต ุดุงูู ููุจูุงูุงุช ูุจู ุงูุชุฃููุฏ/ุงูุจุฏุก

#### 4. `shuttle.trip.line`
**ุงููุตู**: ุฑุงูุจ ูู ุฑุญูุฉ
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: passenger_id, pickup_stop_id, dropoff_stop_id, status
- **ุงูุฅุญุฏุงุซูุงุช**: pickup_latitude, pickup_longitude, dropoff_latitude, dropoff_longitude
- **ุงูุนูุงูุงุช**: 
  - trip_id (Many2one ุฅูู shuttle.trip)
  - group_line_id (Many2one ุฅูู shuttle.passenger.group.line)

#### 5. `shuttle.vehicle`
**ุงููุตู**: ูุฑูุจุฉ ูุฎุตุตุฉ ููููู
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: name, fleet_vehicle_id, seat_capacity, driver_id
- **ุงูุนูุงูุงุช**: fleet_vehicle_id (Many2one ุฅูู fleet.vehicle)

#### 6. `shuttle.stop`
**ุงููุตู**: ููุทุฉ ุชุฌูุน
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: name, stop_type, latitude, longitude, address
- **ุงูุชุญููุงุช**: ูุญุต ุตุญุฉ ุงูุฅุญุฏุงุซูุงุช (Latitude: -90 ุฅูู 90, Longitude: -180 ุฅูู 180)

#### 7. `shuttle.notification`
**ุงููุตู**: ุณุฌู ุงูุฅุดุนุงุฑุงุช
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: notification_type, channel, status, message_content
- **ุงูุชุญููุงุช**: ูุญุต ุตุญุฉ ุฃุฑูุงู ุงูููุงุชู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- **ุงููุธุงุฆู**: 
  - `_send_sms()`: ุฅุฑุณุงู SMS ูุน ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ
  - `_send_whatsapp()`: ุฅุฑุณุงู WhatsApp ูุน ูุนุงูุฌุฉ ุฃุฎุทุงุก ูุชูุฏูุฉ
  - `_send_email()`: ุฅุฑุณุงู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
  - `_send_push()`: ุฅุฑุณุงู Push notifications

#### 8. `res.partner` (ShuttleBee Extension)
**ุงููุตู**: ุงูุชุฏุงุฏ ูุฌูุงุช ุงูุงุชุตุงู ูุฏุนู ูุนูููุงุช ุงูุฑูุงุจ
- **ุงูุญููู ุงูุฑุฆูุณูุฉ**: 
  - `is_shuttle_passenger`: ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุฑุงูุจ
  - `shuttle_latitude`, `shuttle_longitude`: ุฅุญุฏุงุซูุงุช GPS ููุตุนูุฏ
  - `default_pickup_stop_id`, `default_dropoff_stop_id`: ููุงุท ุงูุชุฌูุน ุงูุงูุชุฑุงุถูุฉ
  - `shuttle_trip_direction`: ุชูุถููุงุช ุงุชุฌุงู ุงูุฑุญูุฉ (both/pickup/dropoff)
  - `use_gps_for_pickup`, `use_gps_for_dropoff`: ุฎูุงุฑุงุช ุงุณุชุฎุฏุงู GPS
- **ุญููู ููู ุงูุฃูุฑ** (ุชุธูุฑ ุนูุฏ ุชูุนูู `has_guardian`):
  - `has_guardian`: ุชูุนูู ุญููู ููู ุงูุฃูุฑ
  - `guardian_id`: ููู ุงูุฃูุฑ (Many2one ุฅูู res.partner)
  - `guardian_phone`: ุฑูู ูุงุชู ููู ุงูุฃูุฑ
  - `guardian_email`: ุจุฑูุฏ ููู ุงูุฃูุฑ ุงูุฅููุชุฑููู
- **ุญููู ุงูุนููุงู ุงููุคูุช/ุงูุซุงููู**:
  - `temporary_address`: ุงูุนููุงู ุงููุคูุช ุฃู ุงูุซุงููู
  - `temporary_latitude`, `temporary_longitude`: ุฅุญุฏุงุซูุงุช ุงูุนููุงู ุงููุคูุช
  - `temporary_contact_person_id`: ุดุฎุต ุงูุงุชุตุงู ุงููุฑุชุจุท ุจุงูุนููุงู ุงููุคูุช (Many2one ุฅูู res.partner)
- **ุงูุฅุญุตุงุฆูุงุช**: total_trips, present_trips, absent_trips, attendance_rate
- **ุงูุนูุงูุงุช**: 
  - shuttle_trip_line_ids (One2many ุฅูู shuttle.trip.line)
  - guardian_id (Many2one ุฅูู res.partner)
  - temporary_contact_person_id (Many2one ุฅูู res.partner)

### ุงูููุฒุงุฑุฏ (Wizard)

#### `shuttle.trip.wizard`
**ุงููุตู**: ูููุฏ ุงูุฑุญูุงุช ูู ุงููุฌููุนุงุช
- **ุงููุธููุฉ**: ุฅูุดุงุก ุฑุญูุฉ ุฃู ุฑุญูุชูู (ุตุจุงุญ/ูุณุงุก) ูู ูุฌููุนุฉ
- **ุงููุฏุฎูุงุช**: group_id, trip_date, times, driver, vehicle
- **ุงููุฎุฑุฌุงุช**: ุฑุญูุฉ ุฃู ุฑุญูุชูู ูุน ุงูุฑูุงุจ ุงูููููุกูู ุชููุงุฆูุงู

---

## ๐ง ุงูุชุทููุฑ ูุงูุชุฎุตูุต

### ุฅุถุงูุฉ ููุงุฉ ุฅุดุนุงุฑุงุช ุฌุฏูุฏุฉ

```python
# ูู models/shuttle_notification.py
class ShuttleNotification(models.Model):
    _inherit = 'shuttle.notification'
    
    def _send_custom_channel(self):
        """ุฅุฑุณุงู ุนุจุฑ ููุงุฉ ูุฎุตุตุฉ"""
        try:
        # ููุฏู ููุง
        pass
        except Exception as e:
            _logger.error(f"Failed to send custom notification: {str(e)}", exc_info=True)
            raise UserError(_('Failed to send notification: %s') % str(e))
```

### ุชุฎุตูุต ุชูุฑูุฑ

```xml
<!-- ูู report/shuttle_report_templates.xml -->
<template id="custom_trip_report">
    <t t-call="web.html_container">
        <!-- ูุญุชูู ุงูุชูุฑูุฑ -->
    </t>
</template>
```

### ุฅุถุงูุฉ ุญุงูุฉ ุฌุฏูุฏุฉ ููุฑุญูุฉ

```python
# ูู models/shuttle_trip.py
class ShuttleTrip(models.Model):
    _inherit = 'shuttle.trip'
    
    state = fields.Selection(selection_add=[
        ('custom_state', 'Custom State')
    ])
    
    def action_custom_state(self):
        if not self.driver_id:
            raise UserError(_('Cannot change state without a driver!'))
        self.write({'state': 'custom_state'})
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ูููู ุฅูุดุงุก ุงูููุฒุงุฑุฏ

**ุงูุณุจุจ**: ูุดููุฉ ูู ุงูุตูุงุญูุงุช
**ุงูุญู**: 
1. ุงุฐูุจ ุฅูู **Settings โ Technical โ Security โ Access Rights**
2. ุงุจุญุซ ุนู `shuttle.trip.wizard`
3. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ูุฏูู ุตูุงุญูุงุช Create

### ุงููุดููุฉ: ุงูุฑูุงุจ ูุง ูุธูุฑูู ูู ุงูุฑุญูุฉ

**ุงูุณุจุจ**: ูู ูุชู ุงุฎุชูุงุฑ Passenger Group
**ุงูุญู**: 
1. ุชุฃูุฏ ูู ุงุฎุชูุงุฑ **Passenger Group** ูู ุงูุฑุญูุฉ (ุญูู ุฅูุฒุงูู)
2. ุชุฃูุฏ ูู ุฃู ุงููุฌููุนุฉ ุชุญุชูู ุนูู ุฑูุงุจ
3. ุจุนุฏ ุงุฎุชูุงุฑ ุงููุฌููุนุฉุ ุณูุชู ุชุนุจุฆุฉ ุงูุฑูุงุจ ุชููุงุฆูุงู

### ุงููุดููุฉ: ูุง ูููู ุฅุถุงูุฉ ุฑุงูุจ ูุฏููุงู

**ุงูุณุจุจ**: ูุฐุง ุณููู ููุตูุฏ
**ุงูุญู**: 
- ูุฌุจ ุฅุถุงูุฉ ุงูุฑูุงุจ ุฅูู **Passenger Group** ุฃููุงู
- ุซู ุฅูุดุงุก ุงูุฑุญูุฉ ูู ุงููุฌููุนุฉ
- ุงูุฑูุงุจ ุณูุชู ุชุนุจุฆุชูู ุชููุงุฆูุงู

### ุงููุดููุฉ: ุงูุฅุดุนุงุฑุงุช ูุง ุชูุฑุณู

**ุงูุณุจุจ**: ูุดููุฉ ูู ุงูุฅุนุฏุงุฏุงุช ุฃู API
**ุงูุญู**:
1. ุชุญูู ูู **Settings โ ShuttleBee**
2. ุชุฃูุฏ ูู ุตุญุฉ API credentials (URL ู Key)
3. ุชุญูู ูู **Notifications** log ููุฃุฎุทุงุก
4. ุชุฃูุฏ ูู ุฃู ุงูุฑุงูุจ ูุฏูู ุฑูู ูุงุชู/ุจุฑูุฏ ุฅููุชุฑููู ุตุญูุญ
5. ุชุญูู ูู ุณุฌูุงุช Odoo (`/var/log/odoo18/odoo-server.log`) ููุฃุฎุทุงุก ุงูููุตูุฉ

### ุงููุดููุฉ: Cron jobs ูุง ุชุนูู

**ุงูุณุจุจ**: ุงูููุงู ุงููุฌุฏููุฉ ุบูุฑ ูุดุทุฉ
**ุงูุญู**:
1. ุงุฐูุจ ุฅูู **Settings โ Technical โ Automation โ Scheduled Actions**
2. ุงุจุญุซ ุนู ููุงู ShuttleBee
3. ุชุฃูุฏ ูู ุฃููุง **Active**
4. ุชุญูู ูู ุฅุนุฏุงุฏุงุช Odoo server (`--max-cron-threads`)
5. ุชุญูู ูู ุณุฌูุงุช Odoo ููุฃุฎุทุงุก

### ุงููุดููุฉ: ุฑุณุงูุฉ ุฎุทุฃ "Invalid phone number format"

**ุงูุณุจุจ**: ุฑูู ุงููุงุชู ุบูุฑ ุตุญูุญ
**ุงูุญู**:
- ุชุฃูุฏ ูู ุฃู ุฑูู ุงููุงุชู ูุญุชูู ุนูู 7-15 ุฑูู
- ูููู ุงุณุชุฎุฏุงู ุงูุฃุฑูุงู ูุน ุฃู ุจุฏูู ุฑููุฒ ูุซู +, -, (, )
- ุงููุธุงู ููุธู ุงูุฑูู ุชููุงุฆูุงู ูุจู ุงูุชุญูู

### ุงููุดููุฉ: ุฑุณุงูุฉ ุฎุทุฃ "Invalid email format"

**ุงูุณุจุจ**: ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ุตุญูุญ
**ุงูุญู**:
- ุชุฃูุฏ ูู ุฃู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ูุญุชูู ุนูู @ ู domain ุตุญูุญ
- ูุซุงู ุตุญูุญ: `user@example.com`
- ูุซุงู ุฎุงุทุฆ: `user@` ุฃู `@example.com`

---

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ (FAQ)

### Q: ูุง ุงููุฑู ุจูู Passenger Group ู Shuttle Tripุ

**A**: 
- **Passenger Group**: ูุงูุจ ุซุงุจุช ูุญุชูู ุนูู ุงูุฑูุงุจ ูุงูุฅุนุฏุงุฏุงุช ุงูุงูุชุฑุงุถูุฉ
- **Shuttle Trip**: ุฑุญูุฉ ูุนููุฉ ุจุชุงุฑูุฎ ูุณุงุนุฉ ูุญุฏุฏุฉุ ูุฑุชุจุทุฉ ุจูุฌููุนุฉ

### Q: ูู ูููู ุฅุถุงูุฉ ุฑุงูุจ ูุฏููุงู ูู ุงูุฑุญูุฉุ

**A**: ูุนูุ ูููู ุจุดุฑุท ุฃู ูููู ุงูุฑุงูุจ ููุฌูุฏุงู ูู ููุณ Passenger Group ุงููุฑุชุจุท ุจุงูุฑุญูุฉ. ุณูุชู ุชุนููู `group_line_id` ุชููุงุฆูุงู ุนูุฏ ุฅุถุงูุฉ ุงูุฑุงูุจ.

### Q: ููู ุฃุณุชุฎุฏู ุฅุญุฏุงุซูุงุช GPS ููุฑูุงุจุ

**A**: 
1. ุงุฐูุจ ุฅูู Passenger โ Shuttle Information
2. ุงุชุฑู Default Pickup Stop ูุงุฑุบุงู
3. ุฃุฏุฎู Latitude ู Longitude
4. ุนูุฏ ุฅุถุงูุฉ ุงูุฑุงูุจ ููุฌููุนุฉ:
   - ููููู ุงุณุชุฎุฏุงู ุฒุฑ "Suggest Nearest" ูุงูุชุฑุงุญ ุฃูุฑุจ Stop ุชููุงุฆูุงู
   - ุฃู ุงุชุฑู Stop ูุงุฑุบุงู ูุงุณุชุฎุฏุงู ุงูุฅุญุฏุงุซูุงุช ูุจุงุดุฑุฉ
5. ุนูุฏ ุฅูุดุงุก ุงูุฑุญูุฉุ ุณูุชู ุงุณุชุฎุฏุงู ุงูุฅุญุฏุงุซูุงุช ุชููุงุฆูุงู ุฅุฐุง ูู ููู ููุงู Stop

### Q: ูุง ูู Destination Stopุ

**A**: 
- Destination Stop ูู ููุทุฉ ุงููุฌูุฉ ุงููุดุชุฑูุฉ ูุฌููุน ุงูุฑูุงุจ (ูุซู ุงููุฏุฑุณุฉ ุฃู ุงูุนูู)
- ูู ุฑุญูุฉ Pickup: ูุชู ุงุณุชุฎุฏุงูู ูู Dropoff Stop ุชููุงุฆูุงู ููุฑูุงุจ ุจุฏูู Dropoff Stop ูุญุฏุฏ
- ูู ุฑุญูุฉ Dropoff: ูุชู ุงุณุชุฎุฏุงูู ูู Pickup Stop ุชููุงุฆูุงู ููุฑูุงุจ ุจุฏูู Pickup Stop ูุญุฏุฏ
- ูููุฑ ุงูููุช ููุณูู ุงูุฅุฏุงุฑุฉ ุนูุฏ ูุฌูุฏ ูุฌูุฉ ูุดุชุฑูุฉ

### Q: ููู ูุนูู ุฒุฑ "Suggest Nearest Stop"ุ

**A**: 
- ูุญุณุจ ุงููุณุงูุฉ ุจูู ุฅุญุฏุงุซูุงุช GPS ููุฑุงูุจ ููู Stop ูุดุท
- ููุชุฑุญ ุฃูุฑุจ Stop ุจูุงุกู ุนูู ุงููุณุงูุฉ (ุจุงุณุชุฎุฏุงู Haversine formula)
- ูุนุฑุถ ุงููุณุงูุฉ ุจุงููููููุชุฑุงุช
- ูุธูุฑ ููุท ููุฑูุงุจ ุงูุฐูู ูุฏููู ุฅุญุฏุงุซูุงุช GPS
- ููููู ุงูููุงููุฉ ุนูู ุงูุงูุชุฑุงุญ ุฃู ุงุฎุชูุงุฑ Stop ุขุฎุฑ

### Q: ูู ูููู ุฎูุท ุงูุฑูุงุจ (ุจุนุถูู ุจู Stopุ ูุจุนุถูู ุจุฅุญุฏุงุซูุงุช)ุ

**A**: ูุนู. ุงููุธุงู ูุฑู ููุฏุนู ูุฐุง.

### Q: ููู ุฃูุดุฆ ุฑุญูุฉ ุตุจุงุญูุฉ ููุณุงุฆูุฉ ูู ููุณ ุงููุฌููุนุฉุ

**A**: ุงุณุชุฎุฏู **Generate Trip** ูู Passenger Groupุ ูุงุฎุชุฑ Create Pickup Trip ู Create Dropoff Trip.

### Q: ููู ุฃุบูุฑ ุญุงูุฉ ุงูุฑุญูุฉุ

**A**: 
- **Draft**: ุงูุญุงูุฉ ุงูุงูุชุฑุงุถูุฉ
- **Planned**: ุงุถุบุท Confirm Trip (ูุชุทูุจ: ูุฌููุนุฉุ ุฑูุงุจุ ุณุงุฆูุ ููุช ุงูุจุฏุก)
- **Ongoing**: ุงุถุบุท Start Trip (ูุชุทูุจ: ุญุงูุฉ Planned)
- **Done**: ุงุถุบุท Complete Trip (ูุชุทูุจ: ุญุงูุฉ Ongoing ูููุช ุงูุจุฏุก ุงููุนูู)
- **Cancelled**: ุงุถุบุท Cancel

### Q: ููู ูุนูู ูุธุงู ุงูุฌุฏููุฉ ุงูุฃุณุจูุนูุฉุ

**A**: 
- ููููู ุฅูุดุงุก ุฌุฏูู ุฃุณุจูุนู ูู Passenger Group ูุน ุชุญุฏูุฏ ุฃููุงุช ุงูุตุนูุฏ ูุงููุฒูู ููู ููู
- ููููู ุชุญุฏูุฏ ุฃูุงู ุงูุนุทู ูุงูุงุณุชุซูุงุกุงุช ุงูุชู ูุชู ุงุณุชุซูุงุคูุง ูู ุชูููุฏ ุงูุฑุญูุงุช
- ููููู ุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุงูุฌุฏูู ุจุงุณุชุฎุฏุงู ููุฒุงุฑุฏ "Generate Schedule Trips"
- ููููู ุชูุนูู ุงูุชูููุฏ ุงูุชููุงุฆู ุงูุฃุณุจูุนู ูู ุชุจููุจ Automation

### Q: ููู ูุนูู ุงูุชุญุฏูุซ ุงูุชููุงุฆู ููุญุถูุฑุ

**A**: 
- ุนูุฏ ุงูุถุบุท ุนูู **Mark Boarded** ูุฑุงูุจ ูุงุญุฏุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุขุฎุฑูู ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุตุนุฏ" ุชููุงุฆูุงู
- ุนูุฏ ุงูุถุบุท ุนูู **Complete Trip**ุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุญุงุถุฑ" ุชููุงุฆูุงู (boarded ูุฑุญูุงุช pickupุ dropped ูุฑุญูุงุช dropoff)
- ูุฐุง ูููุฑ ุงูููุช ููุณูู ุงูุฅุฏุงุฑุฉ ุนูุฏ ุงูุชุนุงูู ูุน ุนุฏุฏ ูุจูุฑ ูู ุงูุฑูุงุจ

### Q: ููู ุฃุณุชุฎุฏู ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉุ

**A**: 
1. ุงุฐูุจ ุฅูู **Settings โ Companies โ Companies**
2. ุงุฎุชุฑ ุงูุดุฑูุฉ
3. ูู ุชุจููุจ **Shuttle Information**ุ ุฃุฏุฎู **Company Latitude** ู **Company Longitude**
4. ูู Passenger Groupุ ูุนูู **Use Company Destination**
5. ูู Passengerุ ูุนูู **Use Company GPS Coordinates for Dropoff**
6. ุนูุฏ ุฅูุดุงุก ุงูุฑุญูุงุชุ ุณูุชู ุงุณุชุฎุฏุงู ุฅุญุฏุงุซูุงุช ุงูุดุฑูุฉ ุชููุงุฆูุงู ููุฌูุฉ ููุฑูุงุจ

### Q: ูุง ูู ุชูุถููุงุช ุงุชุฌุงู ุงูุฑุญูุฉ ููุฑุงูุจุ

**A**: 
- **Pickup & Dropoff**: ุงูุฑุงูุจ ูุณุชููุฏ ูู ุฑุญูุงุช ุงูุตุนูุฏ ูุงููุฒูู (ุงูุงูุชุฑุงุถู)
- **Pickup Only**: ุงูุฑุงูุจ ูุณุชููุฏ ูู ุฑุญูุงุช ุงูุตุนูุฏ ููุท
- **Dropoff Only**: ุงูุฑุงูุจ ูุณุชููุฏ ูู ุฑุญูุงุช ุงููุฒูู ููุท
- ุนูุฏ ุชูููุฏ ุงูุฑุญูุงุช ูู ุงูุฌุฏููุ ูุชู ุงุญุชุฑุงู ูุฐู ุงูุชูุถููุงุช ุชููุงุฆูุงู

### Q: ูุง ูู ุงูุชุญุณููุงุช ุงูุฌุฏูุฏุฉ ูู ูุฐุง ุงูุฅุตุฏุงุฑุ

**A**: 
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุงูุฅุดุนุงุฑุงุช
- โ ุงูุชุญูู ูู ุตุญุฉ ุฃุฑูุงู ุงูููุงุชู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช ูู Cron Jobs
- โ ุชุญุณูู ุงูุฃุฏุงุก ูู ุงูุญุณุงุจุงุช
- โ Logging ูุชูุฏู ูุฌููุน ุงูุนูููุงุช
- โ ุชุญูู ุดุงูู ูู ุงูุจูุงูุงุช ูุจู ุงููุนุงูุฌุฉ
- โ ุฅุฏุงุฑุฉ ุงูุฌุฏููุฉ ุงูุฃุณุจูุนูุฉ ููุฑุญูุงุช
- โ ุฅุฏุงุฑุฉ ุงูุนุทู ูุงูุงุณุชุซูุงุกุงุช
- โ ุชูููุฏ ุชููุงุฆู ููุฑุญูุงุช ูู ุงูุฌุฏูู
- โ ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ
- โ ุชูุถููุงุช ุงุชุฌุงู ุงูุฑุญูุฉ ููุฑุงูุจ
- โ ุชุญุฏูุซ ุชููุงุฆู ููุญุถูุฑ ูุงูุตุนูุฏ

---

## ๐ ุงูููุงุฑุฏ ุงูุฅุถุงููุฉ

### ุงููุซุงุฆู
- [Odoo 18 Documentation](https://www.odoo.com/documentation/18.0/)
- [Odoo Development Documentation](https://www.odoo.com/documentation/18.0/developer.html)

### ุงูุฏุนู
- **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**: support@yourcompany.com
- **ุงููููุน**: https://www.yourcompany.com
- **ุงููุซุงุฆู**: https://docs.yourcompany.com/shuttlebee

---

## ๐ ูุนูููุงุช ุงูุฅุตุฏุงุฑ

- **ุงูุฅุตุฏุงุฑ**: 18.0.2.4.0
- **ุงูุชุงุฑูุฎ**: ุฏูุณูุจุฑ 2025
- **ุงูุญุงูุฉ**: Production Ready
- **ุงูุชุฑุฎูุต**: LGPL-3
- **ุงููุทูุฑ**: Your Company
- **ุขุฎุฑ ุชุญุฏูุซ**: ูุธุงู ุงููุฑุงูู ูุตูุงุญูุงุช Dispatcher ุงููุญุณููุฉ

### ุณุฌู ุงูุชุบููุฑุงุช (Changelog)

#### ุงูุฅุตุฏุงุฑ 18.0.2.4.0 (ุฏูุณูุจุฑ 2025) - ูุธุงู ุงููุฑุงูู ูุตูุงุญูุงุช Dispatcher

**โจ ููุฒุงุช ุฌุฏูุฏุฉ:**

- โ **ูุธุงู ุงููุฑุงูู (Companion/Attendant)**:
  - ุฅุถุงูุฉ ุญูู `companion_id` ูู `shuttle.passenger.group` ู `shuttle.trip`
  - ุงููุฑุงูู ูู ููุณ ุตูุงุญูุงุช ุงูุณุงุฆู - ูุฑู ุงูุฑุญูุงุช ุงูุชู ูู ูุฑุงูู ูููุง ูููููู ุชุญุฏูุซ ุญุงูุฉ ุงูุฑูุงุจ
  - ูููู ุฅุถุงูุฉ ุงููุฑุงูู ูู ูุฌููุนุฉ ุงูุฑูุงุจ ุฃู ูู ุตูุญุฉ ุงูุฑุญูุฉ ูุจุงุดุฑุฉ
  - ูุชู ูุณุฎ ุงููุฑุงูู ุชููุงุฆูุงู ูู ุงููุฌููุนุฉ ุฅูู ุงูุฑุญูุฉ ุนูุฏ ุฅูุดุงุก ุฑุญูุฉ ูู ูุฌููุนุฉ
  - ุชุญุฏูุซ Record Rules ููุดูู ุงููุฑุงูู ูู ุตูุงุญูุงุช ุงูุณุงุฆู

- โ **ุตูุงุญูุงุช Dispatcher ุงููุญุณููุฉ**:
  - ุฅุถุงูุฉ ุญูู `dispatcher_id` ูู `shuttle.passenger.group` ูุชุณุฌูู ููุดุฆ ุงููุฌููุนุฉ (ููุถุจุท ุชููุงุฆูุงู ุนูุฏ ุงูุฅูุดุงุก)
  - ุฅุถุงูุฉ ุญูู `dispatcher_group_ids` (Many2many) ูู `shuttle.passenger.group` ูุฅุฏุงุฑุฉ Dispatchers ุงููุตุฑุญ ููู
  - ุฅุถุงูุฉ ุญูู `shuttle_dispatcher_group_ids` ูู `res.users` ูุนุฑุถ ุงููุฌููุนุงุช ุงููุตุฑุญ ููู Dispatcher ุจูุง
  - **Dispatcher ูุฑู ููุท**:
    - ุงููุฌููุนุงุช ุงูุชู ุฃูุดุฃูุง (`dispatcher_id = user.id`)
    - ุงููุฌููุนุงุช ุงูุชู ูุฏูู ุตูุงุญูุฉ ุนูููุง (`dispatcher_group_ids` ูุญุชูู ุนูู ุงููุณุชุฎุฏู)
  - **Manager ูุฑู ูู ุงููุฌููุนุงุช** (ุตูุงุญูุงุช ูุงููุฉ)
  - ุชุญุฏูุซ Record Rules ููุฑุญูุงุช ูุฎุทูุท ุงูุฑูุงุจ ูุงูุฅุดุนุงุฑุงุช ูุงุญุชุฑุงู ุตูุงุญูุงุช Dispatcher

**๐ง ุชุญุณููุงุช:**
- โ ุชุญุฏูุซ ูุงุฌูุงุช ุงููุฌููุนุงุช ูุงูุฑุญูุงุช ูุฅุถุงูุฉ ุญูู ุงููุฑุงูู
- โ ุชุญุฏูุซ ูุงุฌูุฉ ุงููุณุชุฎุฏู ูุฅุถุงูุฉ ูุณู "Dispatcher Groups" ููู Dispatchers
- โ ุชุญุฏูุซ Record Rules ูุฌููุน ุงูููุงุฐุฌ ุงููุฑุชุจุทุฉ (Trips, Trip Lines, Notifications)
- โ ุชุญุณูู ุงูุฃูุงู: Dispatcher ูุง ูุฑู ุณูู ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ ุจูุฌููุนุงุชู ุงููุตุฑุญ ูู ุจูุง

**๐ ุงูุชุบููุฑุงุช ุงูุชูููุฉ:**
- ุฅุถุงูุฉ ุญููู `companion_id` ูู `shuttle.passenger.group` ู `shuttle.trip`
- ุฅุถุงูุฉ ุญููู `dispatcher_id` ู `dispatcher_group_ids` ูู `shuttle.passenger.group`
- ุฅุถุงูุฉ ุญูู `shuttle_dispatcher_group_ids` ูู `res.users`
- ุชุญุฏูุซ `_onchange_group_id()` ูู `shuttle.trip` ููุณุฎ ุงููุฑุงูู ูู ุงููุฌููุนุฉ
- ุชุญุฏูุซ `create()` ูู `shuttle.passenger.group` ูุถุจุท `dispatcher_id` ุชููุงุฆูุงู
- ุชุญุฏูุซ REST endpoints ูู `mobile_api.py` ูุฅุถุงูุฉ `companion_id` ู `companion_name`
- **ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ ูุชุงุญุฉ ุชููุงุฆูุงู ูู `search_read` ุนุจุฑ JSON-RPC API**
- ุชุญุฏูุซ Record Rules ูู `shuttle_security.xml`:
  - `shuttle_trip_rule_driver`: ุฅุถุงูุฉ ุดุฑุท `companion_id`
  - `shuttle_trip_rule_dispatcher`: ุชูููุฏ ุจุงููุฌููุนุงุช ุงููุตุฑุญ ุจูุง
  - `shuttle_trip_line_rule_driver`: ุฅุถุงูุฉ ุดุฑุท `companion_id`
  - `shuttle_trip_line_rule_dispatcher`: ุชูููุฏ ุจุงููุฌููุนุงุช ุงููุตุฑุญ ุจูุง
  - `shuttle_notification_rule_driver`: ุฅุถุงูุฉ ุดุฑุท `companion_id`
  - `shuttle_notification_rule_dispatcher`: ุชูููุฏ ุจุงููุฌููุนุงุช ุงููุตุฑุญ ุจูุง
  - ุฅุถุงูุฉ `shuttle_passenger_group_rule_dispatcher` ู `shuttle_passenger_group_rule_manager`

#### ุงูุฅุตุฏุงุฑ 18.0.2.3.2 (ุฏูุณูุจุฑ 2025) - ุชุญุฏูุซ ุญููู ููู ุงูุฃูุฑ ูุงูุนููุงู ุงููุคูุช

**โจ ููุฒุงุช ุฌุฏูุฏุฉ:**
- โ **ุฅุฏุงุฑุฉ ููู ุงูุฃูุฑ**: ุฅุถุงูุฉ ุญูู ุชูุนูู `has_guardian` ูุฅุธูุงุฑ ุญููู ููู ุงูุฃูุฑ ุจุดูู ูุดุฑูุท
  - ุญููู ููู ุงูุฃูุฑ ุชุธูุฑ ููุท ุนูุฏ ุชูุนูู `has_guardian`
  - ุญููู ุงูุฃุจ: `father_name`, `father_phone` (ุญููู ูุตูุฉ ุจุณูุทุฉ)
  - ุญููู ุงูุฃู: `mother_name`, `mother_phone` (ุญููู ูุตูุฉ ุจุณูุทุฉ)
- โ **ุงูุนููุงู ุงููุคูุช/ุงูุซุงููู**: ุฅุถุงูุฉ ุญููู ููุนููุงู ุงููุคูุช ูุน ุฅุญุฏุงุซูุงุชู
  - `temporary_address`: ุงูุนููุงู ุงููุคูุช ุฃู ุงูุซุงููู (Text)
  - `temporary_latitude`: ุฎุท ุงูุนุฑุถ ุงููุคูุช (Float)
  - `temporary_longitude`: ุฎุท ุงูุทูู ุงููุคูุช (Float)
  - `temporary_contact_name`: ุงุณู ุดุฎุต ุงูุงุชุตุงู (Char)
  - `temporary_contact_phone`: ุฑูู ูุงุชู ุดุฎุต ุงูุงุชุตุงู (Char)
- โ **ุชุญุฏูุซ ูุงุฌูุฉ ุงูุฑูุงุจ**: ุฅุถุงูุฉ ูุณู "Guardian Information" (ุงูุฃุจ ูุงูุฃู) ู "Temporary/Secondary Address" ูู ุชุจููุจ Shuttle Information
- โ **ุชุญุฏูุซ Passenger Group Line**: ุฅุถุงูุฉ ุญููู `father_phone` ู `mother_phone` ูู `shuttle.passenger.group.line`

**๐ง ุชุญุณููุงุช:**
- โ ุงุณุชุจุฏุงู ุญููู Many2one ุจุญููู ูุตูุฉ ุจุณูุทุฉ ูุณูููุฉ ุงูุงุณุชุฎุฏุงู
- โ ุชุญุณูู ุนุฑุถ ุญููู ููู ุงูุฃูุฑ ุจุดูู ูุดุฑูุท ูู ุงููุงุฌูุฉ
- โ ุฏุนู ุงูุนููุงู ุงููุคูุช ูุน ุฅุญุฏุงุซูุงุช GPS ูููุตูุฉ
- โ ุฅุฒุงูุฉ ุงูุงุนุชูุงุฏ ุนูู `res.partner` ูุญููู ููู ุงูุฃูุฑ ูุงูุนููุงู ุงููุคูุช

#### ุงูุฅุตุฏุงุฑ 18.0.2.3.0 (ุฏูุณูุจุฑ 2025) - ุฅุฏุงุฑุฉ ููู ุงูุฃูุฑ ูุงูุนููุงู ุงููุคูุช

**โจ ููุฒุงุช ุฌุฏูุฏุฉ:**
- โ **ุฅุฏุงุฑุฉ ููู ุงูุฃูุฑ**: ุฅุถุงูุฉ ุญูู ุชูุนูู `has_guardian` ูุฅุธูุงุฑ ุญููู ููู ุงูุฃูุฑ ุจุดูู ูุดุฑูุท
- โ **ุงูุนููุงู ุงููุคูุช/ุงูุซุงููู**: ุฅุถุงูุฉ ุญููู ููุนููุงู ุงููุคูุช ูุน ุฅุญุฏุงุซูุงุชู
- โ **ุชุญุฏูุซ ูุงุฌูุฉ ุงูุฑูุงุจ**: ุฅุถุงูุฉ ูุณู "Guardian Information" ู "Temporary/Secondary Address" ูู ุชุจููุจ Shuttle Information

#### ุงูุฅุตุฏุงุฑ 18.0.2.0.0 (ุฏูุณูุจุฑ 2025) - Major Improvements

**โจ ููุฒุงุช ุฌุฏูุฏุฉ:**
- โ **Helper Utilities**: ููุชุจุฉ ูุณุงุนุฏุงุช ูุฑูุฒูุฉ ูุงุจูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู
  - `helpers/validation.py` - ุงูุชุญูู ูู ุตุญุฉ ุงูุจูุงูุงุช (ุฃุฑูุงู ุงูููุงุชูุ ุงูุจุฑูุฏ ุงูุฅููุชุฑูููุ ุงูุฅุญุฏุงุซูุงุช)
  - `helpers/retry_utils.py` - ุฅุนุงุฏุฉ ุงููุญุงููุฉ ุงูุชููุงุฆูุฉ ูุน Exponential Backoff
  - `helpers/notification_providers.py` - ูุญููุงุช ูุฒูุฏู ุงูุฎุฏูุฉ (Twilio, WhatsApp, Firebase)
  - `helpers/logging_utils.py` - ุชุณุฌูู ููุธู ุจุชูุณูู JSON
  - `helpers/conflict_detector.py` - ูุดู ุงูุชุนุงุฑุถุงุช ุงููุญุณูู (ุฃุฏุงุก ุฃูุถู ุจู 10x)
  - `helpers/security_utils.py` - ุงูุฃูุงู (ุนุฑุถ ุงูููุงูุจ ุงูุขููุ ุฅุฏุงุฑุฉ ุจูุงูุงุช ุงูุงุนุชูุงุฏ)
  - `helpers/rate_limiter.py` - ุชุญุฏูุฏ ุงููุนุฏู ูููุน ุงุณุชููุงุฏ ุญุตุฉ API
- โ **Webhook Support**: ููุงุท ููุงูุฉ ูุงุณุชูุจุงู ุญุงูุฉ ุงูุชุณููู ูู ูุฒูุฏู ุงูุฎุฏูุฉ
  - `controllers/webhook_controller.py` - 3 endpoints (SMS, WhatsApp, Health Check)
- โ **Provider Adapters**: ููุท Factory ูุฅูุดุงุก ุงููุฒูุฏูู ุจุณูููุฉ
- โ **Structured Logging**: ุชุณุฌูู JSON ูุชุญููู ุฃูุถู ูููุงุณ ููุช ุงูุชูููุฐ ุชููุงุฆูุงู

**๐ง ุชุญุณููุงุช:**
- โ ุชุญุณูู ูุดู ุงูุชุนุงุฑุถุงุช: ุงุณุชุนูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุจุงุดุฑุฉ (ูุง N+1) - ุฃุฏุงุก ุฃูุถู ุจู 10x
- โ ุชุญุณูู ุงูุชุญูู ูู ุฃุฑูุงู ุงูููุงุชู: ุฏุนู ููุชุจุฉ `phonenumbers` ููุชุญูู ุงูุฏููู
- โ Exponential Backoff: ุฅุนุงุฏุฉ ูุญุงููุฉ ุฐููุฉ ูุน jitter ูููุน ุงูุชุญููู ุงูุฒุงุฆุฏ
- โ Rate Limiting: Token bucket algorithm ูููุน ุงุณุชููุงุฏ ุญุตุฉ API
- โ ุญูุงูุฉ ูู Injection: ุนุฑุถ ุงูููุงูุจ ุงูุขูู ุจุงุณุชุฎุฏุงู Jinja2
- โ ุฅุฒุงูุฉ ุงูุชูุฑุงุฑ: ููุทู ูุฑูุฒู ูุงุจู ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู (DRY principle)
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช: ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููุนุงูุฌุฉ ุฐููุฉ

**๐ ุฅุญุตุงุฆูุงุช:**
- ุนุฏุฏ ุงููููุงุช: ูู 17 ุฅูู 33 (+94%)
- ุฃุณุทุฑ ุงูููุฏ: ูู ~4,300 ุฅูู ~6,800 (+58%)
- ุงูุฃุฏุงุก (conflict detection): ูู O(nยฒ) ุฅูู O(n) - 10x ุฃุณุฑุน

#### ุงูุฅุตุฏุงุฑ 18.0.1.0.0 (2025)
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุฏูุงู ุงูุฅุดุนุงุฑุงุช (SMS/WhatsApp/Push)
- โ ุฅุถุงูุฉ ุชุญูู ูู ุตุญุฉ ุฃุฑูุงู ุงูููุงุชู ูุงูุจุฑูุฏ ุงูุฅููุชุฑููู
- โ ุชุญุณูู ูุนุงูุฌุฉ ุงูุงุณุชุซูุงุกุงุช ูู Cron Jobs ูุน ุฅุญุตุงุฆูุงุช ููุตูุฉ
- โ ุฅุถุงูุฉ ุชุญูู ูู ุงูููู ุงููุงุฑุบุฉ ูู ุงูุญููู ุงููููุฉ
- โ ุชุญุณูู ุงูุฃุฏุงุก ูู ุงูุญุณุงุจุงุช ุงููุชูุฑุฑุฉ
- โ ุฅุถุงูุฉ Logging ุฃูุถู ููุฃุฎุทุงุก ูุน ุชูุงุตูู ูุงููุฉ
- โ ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูุชููู ุฃูุซุฑ ูุถูุญุงู
- โ ุฅุถุงูุฉ ุทุจูุฉ ุฎุฏูุงุช API ููุฑุญูุงุช (`action_generate_from_group`, `action_start_trip`, `action_complete_trip`, `action_cancel_trip`, `action_send_approaching_notifications`, `action_send_arrived_notifications`)
- โ ูุฑุถ ุชุญููุงุช ูุญุงูุฉ ุงูุฑุญูุฉ ุนูุฏ ุชุบููุฑ ุญุงูุฉ ุงูุฑูุงุจ (`action_mark_boarded`, `action_mark_absent`, `action_mark_dropped`) ูุน ุฏุนู ุงุณุชุฌุงุจุงุช ูููููุฉ ุนุจุฑ `service_response`
- โ ุฅุถุงูุฉ ุฎุฏูุฉ ุฅุญุตุงุฆูุงุช ุงูุฏุงุดุจูุฑุฏ (`get_dashboard_stats`) ูุฅุฑุฌุงุน ุฃุฑูุงู ุงูุฑุญูุงุช ูุงูุฑูุงุจ ูุงูุญุถูุฑ ูุงูุบูุงุจ ููุชูุณุท ุงูุฅุดุบุงู ูููุชุฑุงุช ุงููุญุฏุฏุฉ
- โ ุฅุถุงูุฉ ุฎุฏูุฉ `shuttle.stop.suggest_nearest` ูุฅุฑุฌุงุน ุฃูุฑุจ ููุงุท ุชุฌูุน ุญุณุจ ุงูุฅุญุฏุงุซูุงุช ูุน ุฏุนู ุงูุชุตููุฉ ุญุณุจ ุงูููุน ูุงูุดุฑูุฉุ ูุน ุฑุจุท ุฒุฑ Suggest ุจูุง
- โ ุฅุถุงูุฉ ุฎุฏูุฉ `shuttle.config.helper.get_enums` ููุญุตูู ุนูู ุฌููุน ุงูููู ุงูุซุงุจุชุฉ (ุงูู enums) ูุงุณุชุฎุฏุงููุง ูู ุชุทุจููุงุช ุงูููุจ ูุงูููุจุงูู ุฏูู ุฅุนุงุฏุฉ ูุชุงุจุชูุง
- โ ุฅุถุงูุฉ ุญููู ุฅุญุตุงุฆูุฉ ูุญุณูุจุฉ (`total_passengers`, `planned_duration`, `actual_duration`, `delay_minutes`, `passenger_count`, `usage_count`) ูุญููู ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู/ุงูููุชุฑุฉ (`boarding_time`, `absence_reason`, `guardian_id`, `portal_access_token`, `subscription_price`, `billing_cycle`, `is_billable`, `price`) ูุชูููู ุงูุฃุนูุงู ุงูููุฑุฑุฉ ูู ุงููุงุฌูุงุช ูุงูุชูุงุฑูุฑ
- โ ุชุญุฏูุซ ูููุฐุฌ ุงูุตูุงุญูุงุช (Groups/ACLs/Record Rules) ููู ุงูุฃุฏูุงุฑ User/Driver/Dispatcher/Manager ูุถูุงู ุฑุคูุฉ ูู ุฏูุฑ ููุณุฌูุงุช ุงููุฎุตุตุฉ ูู ููุท
- โ ุฅุถุงูุฉ ููุงุฑุณ/ูููุฏ ุนูู ุงูุญููู ุงูุฃูุซุฑ ุงุณุชุฎุฏุงูุงู (trip state/date/driverุ trip line statusุ notification statusโฆ) ูุน ููุน ุชุฌุงูุฒ ุณุนุฉ ุงููุฑูุจุฉ ูุญูุงูุฉ ุงูุนูุงูุงุช (ondelete restrict ุนูุฏ ุงูุญุงุฌุฉ)
- โ ุชุญุณูู ุงูู Logging ูุฑุณุงุฆู ุงูุฃุฎุทุงุกุ ูุน ุณุฌู ุฒููู ููุฑุญูุงุช ููุชูุท ุชุบููุฑุงุช ุงูุญุงูุฉ ูุงูุฅุดุนุงุฑุงุช ุชููุงุฆูุงู
- โ ุชุฌููุฒ ุจููุฉ ุชุชุจุน GPS (`shuttle.gps.position`, `register_gps_position`) ูุฏุนู multi-company ุดุงูู ุนุจุฑ ุฌููุน ุงูููุงุฐุฌ ูุงูููุงุนุฏ
- โ ุฅุถุงูุฉ ุญููู ุงูุทูุณ/ุงููุฑูุฑ (`weather_status`, `traffic_status`, `external_risk_level`) ููุงุฌูุฉ `update_trip_conditions` ููุชุญุถูุฑ ูุชูุงูู ุจูุงูุงุช ุงูุทูุณ ูุงููุฑูุฑ
- โ **ุฅุฏุงุฑุฉ ุงูุฌุฏููุฉ ุงูุฃุณุจูุนูุฉ**: ุฅุถุงูุฉ ูุธุงู ุฌุฏููุฉ ุฃุณุจูุนู ููุฑุญูุงุช ูุน ุฃููุงุช ูููุตูุฉ ููุตุนูุฏ ูุงููุฒูู ููู ููู
- โ **ุฅุฏุงุฑุฉ ุงูุนุทู**: ุฅุถุงูุฉ ูุธุงู ูุฅุฏุงุฑุฉ ุงูุนุทู ูุงูุงุณุชุซูุงุกุงุช ุงูุชู ูุชู ุงุณุชุซูุงุคูุง ูู ุชูููุฏ ุงูุฑุญูุงุช
- โ **ุชูููุฏ ุชููุงุฆู ููุฑุญูุงุช**: ุฅุถุงูุฉ ููุฒุงุฑุฏ ูุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุงูุฌุฏูู ุงูุฃุณุจูุนู ูุน ุงุญุชุฑุงู ุงูุนุทู
- โ **Cron Job ุฃุณุจูุนู**: ุฅุถุงูุฉ ูููุฉ ูุฌุฏููุฉ ูุชูููุฏ ุงูุฑุญูุงุช ุชููุงุฆูุงู ูู ุฃุณุจูุน
- โ **ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ**: ุฅุถุงูุฉ ุฅุญุฏุงุซูุงุช GPS ููุดุฑูุฉ ููุฌูุฉ ุงูุชุฑุงุถูุฉ ููุฑูุงุจ
- โ **ุชูุถููุงุช ุงุชุฌุงู ุงูุฑุญูุฉ**: ุฅุถุงูุฉ ุฎูุงุฑุงุช ูุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุฑุงูุจ ูุณุชููุฏ ูู Pickup & Dropoffุ Pickup Onlyุ ุฃู Dropoff Only
- โ **ุชุญุฏูุซ ุชููุงุฆู ููุญุถูุฑ**: ุนูุฏ ุฅููุงู ุงูุฑุญูุฉุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุญุงุถุฑ" ุชููุงุฆูุงู
- โ **ุชุญุฏูุซ ุชููุงุฆู ููุตุนูุฏ**: ุนูุฏ ุชุณุฌูู ุฑุงูุจ ูุงุญุฏ ูู "ุตุนุฏ"ุ ูุชู ุชุญุฏูุซ ุฌููุน ุงูุฑูุงุจ ุงูุขุฎุฑูู ุงูุฐูู ูู ููุณุฌู ููู "ุบุงุฆุจ" ุฅูู "ุตุนุฏ" ุชููุงุฆูุงู
- โ **Timezone Support**: ุฏุนู ุงูููุงุทู ุงูุฒูููุฉ ูุชูุณูุฑ ุงูุฃููุงุช ุจุดูู ุตุญูุญ ุนูุฏ ุชูููุฏ ุงูุฑุญูุงุช
- โ **Auto-assign Groups**: ุฅุถุงูุฉ ูุธุงู ูุชูุฒูุน ุงููุณุชุฎุฏููู ุชููุงุฆูุงู ุนูู ูุฌููุนุงุช ShuttleBee ุจูุงุกู ุนูู ูุฌููุนุงุช Odoo ุงูููุฌูุฏุฉ
- โ **ุฃุฒุฑุงุฑ ูุดุฑูุทุฉ ุญุณุจ ููุน ุงูุฑุญูุฉ**: 
  - ูู ุฑุญูุงุช Pickup: ูุธูุฑ ุฒุฑ "Mark Boarded" ููุท
  - ูู ุฑุญูุงุช Dropoff: ูุธูุฑ ุฒุฑ "Mark Dropped" ููุท
  - ุงูุฃุฒุฑุงุฑ ุชุธูุฑ/ุชุฎุชูู ุชููุงุฆูุงู ุญุณุจ `trip_type` ูู ูู ูู form view ู tree view
- โ **ุฅุญุตุงุฆูุงุช ูุดุฑูุทุฉ ุญุณุจ ููุน ุงูุฑุญูุฉ**:
  - ูู ุฑุญูุงุช Pickup: ูุธูุฑ ุญูู "Boarded" ูู Passenger Statistics
  - ูู ุฑุญูุงุช Dropoff: ูุธูุฑ ุญูู "Dropped" ูู Passenger Statistics
  - ุชู ุฅุถุงูุฉ ุญูู `dropped_count` ูุญุณูุจ ุชููุงุฆูุงู ุจูุงุกู ุนูู `status == 'dropped'`
- โ **ููุทุฉ ุงูุทูุงู ุงููุฑูุจุฉ (Vehicle Home Location)**:
  - ุฅุถุงูุฉ ุญููู `home_latitude`, `home_longitude`, `home_address` ูููุฑูุจุฉ
  - ุชุญุฏูุฏ ูููู ุงููุฑูุจุฉ ุงูุซุงุจุช ูููุทุฉ ุจุฏุงูุฉ ููุฑุญูุงุช
  - ุงูุชุญูู ุงูุชููุงุฆู ูู ุตุญุฉ ุฅุญุฏุงุซูุงุช ูููู ุงููุฑูุจุฉ
  - ุงุณุชุฎุฏุงู ุงููููู ูู ุญุณุงุจ ุงููุณุงูุงุช ูุชุฎุทูุท ุงููุณุงุฑุงุช
- โ **๐บ๏ธ ุชูุงูู Route Optimizer API** (ุฏูุณูุจุฑ 2025):
  - ุฅุถุงูุฉ ุฎุฏูุฉ `helpers/route_optimizer_service.py` ููุชูุงุตู ูุน Route Optimizer API
  - ุฏุนู ุฃูุถุงุน ุงูุชุญุณูู: PASSENGERS, WEIGHT, VOLUME, COLIS, MULTI
  - ุฅุถุงูุฉ ุฅุนุฏุงุฏุงุช API ูู Settings โ ShuttleBee โ Route Optimizer
  - ุฒุฑ "Optimize Route" ูู ูุงุฌูุฉ ุงูุฑุญูุฉ (`shuttle.trip`) ูุชุญุณูู ุชุฑุชูุจ ุงูุฑูุงุจ ุชููุงุฆูุงู
  - ุฒุฑ "Optimize Route" ูู ูุงุฌูุฉ ุงููุฌููุนุฉ (`shuttle.passenger.group`) ูุชุญุณูู ุงููุงูุจ
  - ุญููู ุฌุฏูุฏุฉ: `optimized_distance_km`, `optimized_duration_min`, `original_distance_km`, `original_duration_min`
  - ุญููู ุงูุชูููุฑ: `distance_saved_km`, `distance_saved_percent`, `time_saved_min`
  - ุชุจููุจ "Route Optimization" ูุน ุชูุฑูุฑ **ูุจู/ุจุนุฏ** ุงูุชุญุณูู
  - ุฏุนู Google OR-Tools ุนุจุฑ API ุฎุงุฑุฌู ูุญู ูุดููุฉ VRP
  - ุชุญุฏูุซ ุชููุงุฆู ูู `sequence` ุงูุฑูุงุจ ุญุณุจ ุงููุณุงุฑ ุงูุฃูุซู
  - ุนููุฏ **#** ูุนุฑุถ ุฑูู ุงูุชุฑุชูุจ ูู ููุงุฆู ุงูุฑูุงุจ

---

## ๐ฏ ุฎุงุฑุทุฉ ุงูุทุฑูู (Roadmap)

ุงูููุฒุงุช ุงููุฎุทุท ููุง:

- [ ] ุชุทุจูู ููุจุงูู ููุณุงุฆููู (React Native)
- [ ] ุชุชุจุน GPS ูู ุงูููุช ุงููุนูู
- [x] ~~ุฎูุงุฑุฒููุงุช ุชุญุณูู ุงููุณุงุฑุงุช~~ โ (ุชู - Route Optimizer Integration)
- [ ] ุจูุงุจุฉ ุงูุฑูุงุจ ููุฎุฏูุฉ ุงูุฐุงุชูุฉ
- [ ] ุชูุงูู ุงูุฏูุน
- [ ] ููุญุฉ ุชุญูููุงุช ูุชูุฏูุฉ
- [ ] ุชูุงูู ุงูุทูุณ
- [ ] ุชูุจููุงุช ุงููุฑูุฑ
- [ ] ุฏุนู ูุชุนุฏุฏ ุงููุบุงุช
- [ ] ุชูุงุฑูุฑ PDF ูุงุจูุฉ ููุชุฎุตูุต
- [ ] ูุงุฌูุฉ ุฎุฑูุทุฉ ุชูุงุนููุฉ ูุนุฑุถ ุงููุณุงุฑุงุช

---

## ๐ ุงูุชุฑุฎูุต

ูุฐุง ุงููุดุฑูุน ูุฑุฎุต ุชุญุช **LGPL-3 License**.

---

## ๐ข ุฑุณุงูุฉ ููุฑูู Frontend - ุงูุชุญุฏูุซุงุช ุงูุฌุฏูุฏุฉ

ุชู ุชุทุจูู ูุธุงููู ุฌุฏูุฏูู ูู ShuttleBee:

### ุงููุธุงู ุงูุฃูู: ุงููุฑุงูู (Companion/Attendant)

**ุงูุชุบููุฑุงุช:**
- ุฅุถุงูุฉ ุญูู `companion_id` ูู:
  - `shuttle.passenger.group` (ูุฌููุนุงุช ุงูุฑูุงุจ)
  - `shuttle.trip` (ุงูุฑุญูุงุช)
- ุงููุฑุงูู ูู ููุณ ุตูุงุญูุงุช ุงูุณุงุฆู:
  - ูุฑู ุงูุฑุญูุงุช ุงูุชู ูู ูุฑุงูู ูููุง
  - ููููู ุชุญุฏูุซ ุญุงูุฉ ุงูุฑูุงุจ (`trip.line`)
  - ูุฑู ุงูุฅุดุนุงุฑุงุช ุงููุฑุชุจุทุฉ ุจุงูุฑุญูุฉ

**API Changes (JSON-RPC search_read):**
- ุนูุฏ ุงุณุชุฎุฏุงู `search_read` ุนูู `shuttle.trip`ุ ุณูุธูุฑ ุญูู `companion_id` (integer ุฃู null)
- ุนูุฏ ุงุณุชุฎุฏุงู `search_read` ุนูู `shuttle.passenger.group`ุ ุณูุธูุฑ ุญูู `companion_id` (integer ุฃู null)
- ุนูุฏ ุฅูุดุงุก/ุชุญุฏูุซ ุฑุญูุฉ ุฃู ูุฌููุนุฉุ ูููู ุฅุฑุณุงู `companion_id` ูู ุงูู payload

**Frontend Updates Needed:**
1. ุฅุถุงูุฉ ุญูู "Companion / Attendant" ูู:
   - ุตูุญุฉ ุฅูุดุงุก/ุชุนุฏูู ูุฌููุนุฉ ุงูุฑูุงุจ
   - ุตูุญุฉ ุฅูุดุงุก/ุชุนุฏูู ุงูุฑุญูุฉ
2. ุนุฑุถ ุงุณู ุงููุฑุงูู ูู:
   - ูุงุฆูุฉ ุงูุฑุญูุงุช
   - ุชูุงุตูู ุงูุฑุญูุฉ
   - ููุญุฉ ูุนูููุงุช ุงูุณุงุฆู
3. ุนูุฏ ุงุณุชุฎุฏุงู `search_read`:
   - ุชุฃูุฏ ูู ุชุถููู `companion_id` ูู ูุงุฆูุฉ ุงูุญููู ุงููุทููุจุฉ
   - ุนูุฏ ุฅูุดุงุก/ุชุญุฏูุซ ุฑุญูุฉุ ูููู ุฅุฑุณุงู `companion_id` ูู ุงูู values
   - ููุญุตูู ุนูู ุงุณู ุงููุฑุงููุ ุงุณุชุฎุฏู `companion_id` ูุน `read` ุฃู `name_get` ุนูู `res.users`:
     ```json
     {
       "jsonrpc": "2.0",
       "method": "call",
       "params": {
         "service": "object",
         "method": "execute_kw",
         "args": [
           "database_name",
           user_id,
           "password",
           "res.users",
           "read",
           [[companion_id]],
           {"fields": ["id", "name", "login"]}
         ]
       },
       "id": 1
     }
     ```

---

### ุงููุธุงู ุงูุซุงูู: ุตูุงุญูุงุช Dispatcher

**ุงูุชุบููุฑุงุช:**
- ุฅุถุงูุฉ ุญููู ูู `shuttle.passenger.group`:
  - `dispatcher_id`: ููุดุฆ ุงููุฌููุนุฉ (ููุถุจุท ุชููุงุฆูุงูุ readonly)
  - `dispatcher_group_ids`: ูุงุฆูุฉ Dispatchers ุงููุตุฑุญ ููู (Many2many)
- ุฅุถุงูุฉ ุญูู ูู `res.users`:
  - `shuttle_dispatcher_group_ids`: ุงููุฌููุนุงุช ุงููุตุฑุญ ููู Dispatcher ุจูุง (Many2many)

**ุงูุตูุงุญูุงุช:**
- **Dispatcher** ูุฑู ููุท:
  - ุงููุฌููุนุงุช ุงูุชู ุฃูุดุฃูุง (`dispatcher_id = user.id`)
  - ุงููุฌููุนุงุช ุงููุตุฑุญ ูู ุจูุง (`dispatcher_group_ids` ูุญุชูู ุนูู ุงููุณุชุฎุฏู)
- **Manager** ูุฑู ูู ุงููุฌููุนุงุช (ุตูุงุญูุงุช ูุงููุฉ)

**API Changes (JSON-RPC search_read):**
- ุนูุฏ ุงุณุชุฎุฏุงู `search_read` ุนูู `shuttle.passenger.group`:
  - ุณูุธูุฑ `dispatcher_id` (integer) - ID ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงููุฌููุนุฉ
  - ุณูุธูุฑ `dispatcher_group_ids` (array of integers) - ูุงุฆูุฉ IDs ูููุณุชุฎุฏููู ุงููุตุฑุญ ููู
- ุนูุฏ ุงุณุชุฎุฏุงู `search_read` ุนูู `res.users` (ููู Dispatchers):
  - ุณูุธูุฑ `shuttle_dispatcher_group_ids` (array of integers) - ูุงุฆูุฉ IDs ูููุฌููุนุงุช ุงููุตุฑุญ ูู ุจูุง

**Frontend Updates Needed:**
1. ุฅุถุงูุฉ ูุณู "Dispatcher Access" ูู ุตูุญุฉ ุงููุฌููุนุฉ (ูููุฏูุฑูู ููุท):
   - ุนุฑุถ `dispatcher_id` (readonly) - ุงุณู ุงููุณุชุฎุฏู ุงูุฐู ุฃูุดุฃ ุงููุฌููุนุฉ
   - ุญูู `dispatcher_group_ids` (Many2many tags) ูุฅุถุงูุฉ/ุฅุฒุงูุฉ Dispatchers
2. ุฅุถุงูุฉ ูุณู "Dispatcher Groups" ูู ุตูุญุฉ ุงููุณุชุฎุฏู (ููู Dispatchers ููุท):
   - ุนุฑุถ `shuttle_dispatcher_group_ids` (Many2many tags) - ุงููุฌููุนุงุช ุงููุตุฑุญ ูู ุจูุง
3. ุชุตููุฉ ุงูุจูุงูุงุช:
   - ุนูุฏ ุงุณุชุฎุฏุงู `search_read` ุนูู `shuttle.passenger.group`ุ Dispatcher ุณูุญุตู ุชููุงุฆูุงู ููุท ุนูู ุงููุฌููุนุงุช ุงููุตุฑุญ ูู ุจูุง (Record Rules)
   - ุนูุฏ ุงุณุชุฎุฏุงู `search_read` ุนูู `shuttle.trip`ุ Dispatcher ุณูุญุตู ุชููุงุฆูุงู ููุท ุนูู ุงูุฑุญูุงุช ุงููุฑุชุจุทุฉ ุจูุฌููุนุงุชู (Record Rules)

---

### ููุงุญุธุงุช ุชูููุฉ

1. **Record Rules**: ุชู ุชุญุฏูุซูุง ุชููุงุฆูุงู ูู Backend - ูุง ุญุงุฌุฉ ูุชุบููุฑุงุช ุฅุถุงููุฉ ูู Frontend
2. **ุงูุฃูุงู**: ุฌููุน ุงูุชุบููุฑุงุช ูุญููุฉ ุนุจุฑ Record Rules - ูู ูุณุชุฎุฏู ูุฑู ููุท ุงูุจูุงูุงุช ุงููุตุฑุญ ูู ุจูุง
3. **ุงูุชูุงูู**: ุงูุชุบููุฑุงุช ูุชูุงููุฉ ูุน ุงูุฅุตุฏุงุฑุงุช ุงูุณุงุจูุฉ - ุงูุญููู ุงูุฌุฏูุฏุฉ ุงุฎุชูุงุฑูุฉ (nullable)
4. **search_read**: ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ ูุชุงุญุฉ ุชููุงุฆูุงู ูู `search_read` - ูุง ุญุงุฌุฉ ูุชุนุฏููุงุช ูู Backend

---

### ุฃูุซูุฉ API (JSON-RPC search_read)

**ุฌูุจ ุฑุญูุฉ:**
```json
{
  "jsonrpc": "2.0",
  "method": "call",
  "params": {
    "service": "object",
    "method": "execute_kw",
    "args": [
      "database_name",
      user_id,
      "password",
      "shuttle.trip",
      "search_read",
      [
        ["|", ("driver_id", "=", user_id), ("companion_id", "=", user_id)]
      ],
      {
        "fields": ["id", "name", "driver_id", "companion_id", "group_id", "state", "date"],
        "limit": 10
      }
    ]
  },
  "id": 1
}
```

**ุฌูุจ ูุฌููุนุฉ (ููู Dispatcher):**
```json
{
  "jsonrpc": "2.0",
  "method": "call",
  "params": {
    "service": "object",
    "method": "execute_kw",
    "args": [
      "database_name",
      user_id,
      "password",
      "shuttle.passenger.group",
      "search_read",
      [
        []
      ],
      {
        "fields": ["id", "name", "driver_id", "companion_id", "dispatcher_id", "dispatcher_group_ids"],
        "limit": 10
      }
    ]
  },
  "id": 1
}
```

**ุฅูุดุงุก/ุชุญุฏูุซ ุฑุญูุฉ:**
```json
{
  "jsonrpc": "2.0",
  "method": "call",
  "params": {
    "service": "object",
    "method": "execute_kw",
    "args": [
      "database_name",
      user_id,
      "password",
      "shuttle.trip",
      "write",
      [
        [trip_id],
        {
          "companion_id": 8  // NEW - optional
        }
      ]
    ]
  },
  "id": 1
}
```

---

ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ. ุฌููุน ุงูุชุบููุฑุงุช ููุซูุฉ ูู `README.md`.

---

<div align="center">

**ุชู ุงูุชุทููุฑ ุจู โค๏ธ ูุชุญุณูู ุฅุฏุงุฑุฉ ุฎุฏูุงุช ุงูููู**

Made with โค๏ธ for better transportation management

</div>
