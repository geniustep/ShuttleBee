"# ุฎูุงุตุฉ ุงูุฌูุณุฉ - ุชุญุฏูุซ ุญููู ููู ุงูุฃูุฑ ูุงูุนููุงู ุงููุคูุช

**ุงูุชุงุฑูุฎ**: 16 ุฏูุณูุจุฑ 2025  
**ุงูุฅุตุฏุงุฑ**: 18.0.2.3.2

---

## ๐ ููุฎุต ุงูุชุบููุฑุงุช

ุชู ุชุญุฏูุซ ูุธุงู ShuttleBee ูุฅุถุงูุฉ ูุชุญุณูู ุญููู ููู ุงูุฃูุฑ ูุงูุนููุงู ุงููุคูุช ููุฑูุงุจุ ูุน ุงุณุชุจุฏุงู ุงูุญููู ุงููุฑุชุจุทุฉ ุจู `res.partner` ุจุญููู ูุตูุฉ ุจุณูุทุฉ ูุณูููุฉ ุงูุงุณุชุฎุฏุงู.

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1. ุฅุฏุงุฑุฉ ููู ุงูุฃูุฑ (Guardian Management)

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ ุญูู ุชูุนูู `has_guardian` (Boolean) ูุฅุธูุงุฑ/ุฅุฎูุงุก ุญููู ููู ุงูุฃูุฑ ุจุดูู ูุดุฑูุท
- โ ุงุณุชุจุฏุงู ุงูุญููู ุงููุฏููุฉ:
  - ~~`guardian_id` (Many2one)~~ โ ุญุฐู
  - ~~`guardian_phone` (Char)~~ โ ุญุฐู
  - ~~`guardian_email` (Char)~~ โ ุญุฐู

- โ ุฅุถุงูุฉ ุญููู ุฌุฏูุฏุฉ (ุญููู ูุตูุฉ ุจุณูุทุฉ):
  - `father_name` (Char): ุงุณู ุงูุฃุจ
  - `father_phone` (Char): ุฑูู ูุงุชู ุงูุฃุจ
  - `mother_name` (Char): ุงุณู ุงูุฃู
  - `mother_phone` (Char): ุฑูู ูุงุชู ุงูุฃู

**ุงููุงุฌูุฉ:**
- ูุณู "Guardian Information" ูู ุชุจููุจ Shuttle Information
- ูุณู "Father Information" (ูุธูุฑ ุนูุฏ ุชูุนูู `has_guardian`)
- ูุณู "Mother Information" (ูุธูุฑ ุนูุฏ ุชูุนูู `has_guardian`)

### 2. ุงูุนููุงู ุงููุคูุช/ุงูุซุงููู (Temporary/Secondary Address)

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ ุญููู ุงูุนููุงู ุงููุคูุช:
  - `temporary_address` (Text): ุงูุนููุงู ุงููุงูู
  - `temporary_latitude` (Float): ุฎุท ุงูุนุฑุถ ุงููุคูุช
  - `temporary_longitude` (Float): ุฎุท ุงูุทูู ุงููุคูุช

- โ ุงุณุชุจุฏุงู ุญูู ุดุฎุต ุงูุงุชุตุงู:
  - ~~`temporary_contact_person_id` (Many2one)~~ โ ุญุฐู
  - โ `temporary_contact_name` (Char): ุงุณู ุดุฎุต ุงูุงุชุตุงู
  - โ `temporary_contact_phone` (Char): ุฑูู ูุงุชู ุดุฎุต ุงูุงุชุตุงู

**ุงููุงุฌูุฉ:**
- ูุณู "Temporary/Secondary Address" ูู ุชุจููุจ Shuttle Information
- ุฌููุน ุงูุญููู ุชุธูุฑ ููุท ุนูุฏูุง ูููู `is_shuttle_passenger = True`

### 3. ุชุญุฏูุซ Passenger Group Line

**ุงูุชุบููุฑุงุช:**
- โ ุชุญุฏูุซ `shuttle.passenger.group.line`:
  - ุญุฐู: `guardian_phone` (related field)
  - ุฅุถุงูุฉ: `father_phone` (related field)
  - ุฅุถุงูุฉ: `mother_phone` (related field)

- โ ุชุญุฏูุซ ุงูู View:
  - ุชุญุฏูุซ Kanban view ูุนุฑุถ ุฑูู ูุงุชู ุงูุฃุจ ูุงูุฃู
  - ุฅุฒุงูุฉ ุงููุฑุงุฌุน ุฅูู `guardian_phone`

---

## ๐ง ุงููููุงุช ุงููุนุฏูุฉ

### ุงูููุงุฐุฌ (Models)
1. **`models/res_partner.py`**
   - ุฅุถุงูุฉ ุญููู: `has_guardian`, `father_name`, `father_phone`, `mother_name`, `mother_phone`
   - ุฅุถุงูุฉ ุญููู: `temporary_address`, `temporary_latitude`, `temporary_longitude`, `temporary_contact_name`, `temporary_contact_phone`
   - ุชุญุฏูุซ ุฏุงูุฉ `action_send_portal_invitation` ููุนูู ูุน ุงูุญููู ุงูุฌุฏูุฏุฉ

2. **`models/shuttle_passenger_group.py`**
   - ุงุณุชุจุฏุงู `guardian_phone` ุจู `father_phone` ู `mother_phone`
   - ุชุญุฏูุซ related fields

### ุงููุงุฌูุงุช (Views)
1. **`views/res_partner_views.xml`**
   - ุชุญุฏูุซ ูุณู "Guardian Information" ูุนุฑุถ ุญููู ุงูุฃุจ ูุงูุฃู
   - ุชุญุฏูุซ ูุณู "Temporary/Secondary Address" ูุนุฑุถ ุญููู ูุตูุฉ ุจุณูุทุฉ

2. **`views/shuttle_passenger_group_line_views.xml`**
   - ุชุญุฏูุซ Kanban view ูุนุฑุถ `father_phone` ู `mother_phone`
   - ุฅุฒุงูุฉ ุงููุฑุงุฌุน ุฅูู `guardian_phone`

### ุงูุฅุนุฏุงุฏุงุช
1. **`__manifest__.py`**
   - ุชุญุฏูุซ ุฑูู ุงูุฅุตุฏุงุฑ ูู `18.0.2.2.0` โ `18.0.2.3.2`

2. **`README.md`**
   - ุชุญุฏูุซ ูุณู ุฅุฏุงุฑุฉ ุงูุฑูุงุจ
   - ุชุญุฏูุซ ูุณู ุชุณุฌูู ุงูุฑูุงุจ
   - ุชุญุฏูุซ ูุณู ุงูุจููุฉ ุงูุชูููุฉ
   - ุชุญุฏูุซ ุณุฌู ุงูุชุบููุฑุงุช

---

## ๐๏ธ ุชุบููุฑุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุญููู ุงููุญุฐููุฉ:
- `res_partner.guardian_id` (integer, foreign key)
- `res_partner.guardian_phone` (varchar)
- `res_partner.guardian_email` (varchar)
- `res_partner.temporary_contact_person_id` (integer, foreign key)

### ุงูุญููู ุงููุถุงูุฉ:
- `res_partner.has_guardian` (boolean)
- `res_partner.father_name` (varchar)
- `res_partner.father_phone` (varchar)
- `res_partner.mother_name` (varchar)
- `res_partner.mother_phone` (varchar)
- `res_partner.temporary_address` (text)
- `res_partner.temporary_latitude` (numeric)
- `res_partner.temporary_longitude` (numeric)
- `res_partner.temporary_contact_name` (varchar)
- `res_partner.temporary_contact_phone` (varchar)

---

## ๐ ุงููุดุงูู ุงูุชู ุชู ุญููุง

### 1. Internal Server Error
**ุงูุณุจุจ**: ุญูู `guardian_phone` ูู `shuttle.passenger.group.line` ูุงู ูุดูุฑ ุฅูู `passenger_id.guardian_phone` ุงูุฐู ูู ูุนุฏ ููุฌูุฏุงู.

**ุงูุญู**: 
- ุงุณุชุจุฏุงู `guardian_phone` ุจู `father_phone` ู `mother_phone`
- ุชุญุฏูุซ ุฌููุน ุงููุฑุงุฌุน ูู ุงูู views

### 2. KeyError ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
**ุงูุณุจุจ**: ุงูุญููู ุงูุฌุฏูุฏุฉ ูู ูุชู ุชุญุฏูุซูุง ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช.

**ุงูุญู**:
- ุชุญุฏูุซ ุงููุญุฏุฉ ุจุงุณุชุฎุฏุงู `-u shuttlebee`
- ุญุฐู ุงูุญููู ุงููุฏููุฉ ูุฏููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฅูุดุงุก ุงูุญููู ุงูุฌุฏูุฏุฉ ุชููุงุฆูุงู ุนุจุฑ ุชุญุฏูุซ ุงููุญุฏุฉ

---

## ๐ ุฎุทูุงุช ุงูุชุญุฏูุซ

1. **ุชุญุฏูุซ ุงูููุฏ**:
   ```bash
   cd /opt/odoo18/custom_models/shuttlebee
   # ุชู ุชุญุฏูุซ ุงููููุงุช ุงููุฐููุฑุฉ ุฃุนูุงู
   ```

2. **ุชุญุฏูุซ ูุงุนุฏุฉ ุงูุจูุงูุงุช**:
   ```bash
   sudo systemctl stop odoo18
   sudo -u odoo18 /opt/odoo18/venv/bin/python3 /opt/odoo18/odoo/odoo-bin \
     -c /etc/odoo18.conf \
     -d shuttlebee \
     -u shuttlebee \
     --stop-after-init
   sudo systemctl start odoo18
   ```

3. **ุงูุชุญูู ูู ุงูุชุญุฏูุซ**:
   - ูุชุญ ุตูุญุฉ ุงูุฑุงูุจ ูู Odoo
   - ุงูุชุญูู ูู ุธููุฑ ุญููู ููู ุงูุฃูุฑ (ุงูุฃุจ ูุงูุฃู)
   - ุงูุชุญูู ูู ุธููุฑ ุญููู ุงูุนููุงู ุงููุคูุช

---

## โ ุงููุชุงุฆุฌ

### ูุจู ุงูุชุญุฏูุซ:
- ุญููู ููู ุงูุฃูุฑ ูุฑุชุจุทุฉ ุจู `res.partner` (Many2one)
- ุญูู ุดุฎุต ุงูุงุชุตุงู ููุนููุงู ุงููุคูุช ูุฑุชุจุท ุจู `res.partner` (Many2one)
- ูุชุทูุจ ุฅูุดุงุก ุณุฌูุงุช ูู `res.partner` ูุงุณุชุฎุฏุงู ุงูุญููู

### ุจุนุฏ ุงูุชุญุฏูุซ:
- ุญููู ููู ุงูุฃูุฑ ุนุจุงุฑุฉ ุนู ุญููู ูุตูุฉ ุจุณูุทุฉ (Char)
- ุญูู ุดุฎุต ุงูุงุชุตุงู ููุนููุงู ุงููุคูุช ุนุจุงุฑุฉ ุนู ุญููู ูุตูุฉ ุจุณูุทุฉ (Char)
- ุณูููุฉ ูู ุงูุงุณุชุฎุฏุงู ุจุฏูู ุงูุญุงุฌุฉ ูุฅูุดุงุก ุณุฌูุงุช ุฅุถุงููุฉ
- ูุงุฌูุฉ ุฃุจุณุท ูุฃูุซุฑ ูุฑููุฉ

---

## ๐ฏ ุงูููุงุฆุฏ

1. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุง ุญุงุฌุฉ ูุฅูุดุงุก ุณุฌูุงุช ูู `res.partner` ูููู ุงูุฃูุฑ ุฃู ุดุฎุต ุงูุงุชุตุงู
2. **ูุฑููุฉ ุฃูุจุฑ**: ุฅููุงููุฉ ุฅุฏุฎุงู ูุนูููุงุช ููู ุงูุฃูุฑ ูุจุงุดุฑุฉ ุจุฏูู ุฑุจุท
3. **ุฃุฏุงุก ุฃูุถู**: ุชูููู ุนุฏุฏ ุงูุนูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
4. **ูุงุฌูุฉ ุฃุจุณุท**: ุญููู ูุตูุฉ ุจุณูุทุฉ ุจุฏูุงู ูู ุญููู Many2one ูุนูุฏุฉ

---

## ๐ ุงููุซุงุฆู ุงููุญุฏุซุฉ

- โ `README.md` - ุชู ุชุญุฏูุซ ุฌููุน ุงูุฃูุณุงู ุฐุงุช ุงูุตูุฉ
- โ `SESSION_SUMMARY.md` - ูุฐุง ุงูููู (ุฎูุงุตุฉ ุงูุฌูุณุฉ)

---

## ๐ ุงูุฅุตุฏุงุฑุงุช

- **18.0.2.2.0** โ **18.0.2.3.0** โ **18.0.2.3.1** โ **18.0.2.3.2**

---

## ๐ ููุงุญุธุงุช ุฅุถุงููุฉ

- ุฌููุน ุงูุญููู ุงูุฌุฏูุฏุฉ ุชุธูุฑ ููุท ุนูุฏูุง ูููู `is_shuttle_passenger = True`
- ุญููู ููู ุงูุฃูุฑ ุชุธูุฑ ููุท ุนูุฏูุง ูููู `has_guardian = True`
- ุชู ุชุญุฏูุซ ุฏุงูุฉ `action_send_portal_invitation` ููุนูู ูุน ุงูุญููู ุงูุฌุฏูุฏุฉ (ูููู ุชุทููุฑูุง ูุงุญูุงู ูุฏุนู SMS/WhatsApp)

---

**ุชู ุงูุชุทููุฑ ุจูุงุณุทุฉ**: AI Assistant  
**ุงูุชุงุฑูุฎ**: 16 ุฏูุณูุจุฑ 2025  
**ุงูุญุงูุฉ**: โ ููุชูู ููุฎุชุจุฑ
"